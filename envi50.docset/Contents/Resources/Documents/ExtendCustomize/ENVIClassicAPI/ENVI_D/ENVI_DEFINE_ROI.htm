<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Programming|Routines|Data Control|ENVI Classic" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   ENVI_DEFINE_ROI
  </title>
  <link href="../../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../../ENVIHelp_CSH.htm#ExtendCustomize/ENVIClassicAPI/ENVI_D/ENVI_DEFINE_ROI.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../../ProgrammingWithENVI.htm">
    Programming
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../../Routines.htm">
    Routines
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../../ENVICoordSys.htm">
    Data Control
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    ENVI_DEFINE_ROI
   </span>
  </div>
  <h1>
   <a name="kanchor529">
   </a>
   ENVI_DEFINE_ROI
  </h1>
  <p>
   <a href="#Syntax">
    Syntax
   </a>
   |
   <a href="#Arguments">
    Arguments
   </a>
   |
   <a href="#Keywords">
    Keywords
   </a>
   |
   <a href="#Example">
    Example
   </a>
  </p>
  <p class="HighlightText">
   This routine only works with
   <span class="DocumentTitleProductNameENVIClassic">
    ENVI Classic
   </span>
   display groups and cannot be used with the
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   display or in code that starts the application with the
   <a href="../../ENVI.htm">
    ENVI&#160;function
   </a>
   .
  </p>
  <p>
   Use this procedure to define point, polyline, and polygon objects in an ROI. Each ROI can be composed of multiple and/or mixed objects. For example, a single ROI may have 100 individual points and three polygons. Using a ROI_ID returned from
   <a href="../ENVI_C/ENVI_CREATE_ROI.htm">
    ENVI_CREATE_ROI
   </a>
   , each call to ENVI_DEFINE_ROI adds one object to the ROI definition (multiple points may be added with a single call). Once you create an ROI, you can use it in processing routines or save it to an ROI file.
  </p>
  <h2 class="API">
   <a name="Syntax">
   </a>
   Syntax
  </h2>
  <p>
   ENVI_DEFINE_ROI,
   <i>
    ROI_ID
   </i>
   [, /
   <a href="#NO_UPDATE">
    NO_UPDATE
   </a>
   ] [, /
   <a href="#POINT">
    POINT
   </a>
   ] [, /
   <a href="#POLYGON">
    POLYGON
   </a>
   ] [, /
   <a href="#POLYLINE">
    POLYLINE
   </a>
   ],
   <a href="#XPTS">
    XPTS
   </a>
   =
   <i>
    array
   </i>
   ,
   <a href="#YPTS">
    YPTS
   </a>
   =
   <i>
    array
   </i>
  </p>
  <h2 class="API">
   <a name="Arguments">
   </a>
   Arguments
  </h2>
  <h3>
   ROI_ID
  </h3>
  <p>
   This is a single ID returned from the function
   <a href="../ENVI_S/ENVI_SUBSPACE_BACKGROUND_STATS_DOIT.htm">
    ENVI_CREATE_ROI
   </a>
   or
   <a href="../ENVI_G/ENVI_GET_ROI_IDS.htm">
    ENVI_GET_ROI_IDS
   </a>
   .
  </p>
  <h2 class="API">
   <a name="Keywords">
   </a>
   Keywords
  </h2>
  <h3>
   <a name="NO_UPDATE">
   </a>
   NO_UPDATE (optional)
  </h3>
  <p>
   Set this keyword to indicate the newly created ROI should not appear in the ROI Tool dialog.
  </p>
  <h3>
   <a name="POINT">
   </a>
   POINT (optional)
  </h3>
  <p>
   Set this keyword to indicate that the x and y arrays define a set of points. When you set POINT, you cannot set POLYLINE and POLYGON.
  </p>
  <h3>
   <a name="POLYLINE">
   </a>
   POLYLINE (optional)
  </h3>
  <p>
   Set this keyword to indicate that the x and y arrays define a polyline. A polyline is a series of x,y points that are connected with a straight line. You can define only one polyline with each call to ENVI_DEFINE_ROI. When you set POLYLINE, you cannot set POINT and POLYGON.
  </p>
  <h3>
   <a name="POLYGON">
   </a>
   POLYGON (optional)
  </h3>
  <p>
   Set this keyword to indicate that the x and y arrays define a polygon. A polygon is a closed area that is defined by a series of connected x,y points. In order to properly close the polygon, the first and last point in XPTS and YPTS must be the same. When you set POLYGON, you cannot set POINT and POLYLINE.
  </p>
  <h3>
   <a name="XPTS">
   </a>
   XPTS
  </h3>
  <p>
   Use this keyword to specify an array of x points of the specified type. XPTS is in file coordinates. You must set one of the keywords POINT, POLYLINE, or POLYGON, to indicate the type of XPTS.
  </p>
  <h3>
   <a name="YPTS">
   </a>
   YPTS
  </h3>
  <p>
   Use this keyword to specify an array of y points of the specified type. YPTS is in file coordinates. You must set one of the keywords POINT, POLYLINE, or POLYGON, to indicate the type ‘of YPTS.
  </p>
  <h2 class="API">
   <a name="Example">
   </a>
   Example
  </h2>
  <p>
   This example creates a square polygon ROI to display on the
   <code>
    bhtmref.img
   </code>
   image.
  </p>
  <p>
   First, start
   <span class="DocumentTitleProductNameENVIClassic">
    ENVI Classic
   </span>
   and open the file
   <code>
    bhtmref.img
   </code>
   . Issue the
   <a href="../ENVI_S/ENVI_SELECT.htm">
    ENVI_SELECT
   </a>
   command and select the file
   <code>
    bhtmref.img
   </code>
   . Next, use
   <a href="../ENVI_C/ENVI_CREATE_ROI.htm">
    ENVI_CREATE_ROI
   </a>
   and the returned FID to create an ROI with the file attributes associated with
   <code>
    bhtmref.img
   </code>
   . Now, define the square polygon points and add this object to the ROI using ENVI_DEFINE_ROI. You can overlay the resulting ROI on the file
   <code>
    bmtmref.img
   </code>
   .
  </p>
  <p class="Code">
   PRO EXAMPLE_ENVI_DEFINE_ROI
  </p>
  <p class="Code_Indented">
   compile_opt IDL2
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; First restore all the base save files.
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   envi, /restore_base_save_files
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; Initialize ENVI and send all errors
  </p>
  <p class="Code_Indented">
   ; and warnings to the file batch.txt
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   envi_batch_init, log_file='batch.txt'
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; Choose the bhtmref.img file
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   envi_select, fid=fid
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; Get the dimensions
for this file and
  </p>
  <p class="Code_Indented">
   ; create an ROI.
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   envi_file_query, fid, dims=dims
  </p>
  <p class="Code_Indented">
   roi_id=envi_create_roi(ns=ns, nl=nl, $
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;color=4, name='Square')
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; Define the square and add
  </p>
  <p class="Code_Indented">
   ; the polygon object to the ROI
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   xpts = [100, 200, 200, 100, 100]
  </p>
  <p class="Code_Indented">
   ypts = [100, 100, 200, 200, 100]
  </p>
  <p class="Code_Indented">
   envi_define_roi, roi_id, /polygon, $
  </p>
  <p class="Code_Indented">
   &#160;&#160;&#160;xpts=xpts, ypts=ypts
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   ; Exit ENVI
  </p>
  <p class="Code_Indented">
   ;
  </p>
  <p class="Code_Indented">
   envi_batch_exit
  </p>
  <p class="Code">
   END
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>