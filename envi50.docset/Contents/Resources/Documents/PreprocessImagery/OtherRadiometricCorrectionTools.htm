<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Preprocess|Radiometric Correction Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Other Radiometric Correction Tools
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../ENVIHelp_CSH.htm#PreprocessImagery/OtherRadiometricCorrectionTools.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="PreprocessImagery.htm">
    Preprocess
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="RadiometricCorrectionTools.htm">
    Radiometric Correction Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Other Radiometric Correction Tools
   </span>
  </div>
  <h1>
   Other Radiometric Correction Tools
  </h1>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#Apply">
     Apply Gain and Offset
    </a>
   </li>
   <li value="2">
    <a href="#Applying">
     Cross-Track Illumination Correction
    </a>
   </li>
   <li value="3">
    <a href="#EFFORT">
     EFFORT Polishing
    </a>
   </li>
  </ul>
  <h2>
   <a name="Apply">
   </a>
   Apply Gain and Offset
   <a name="kanchor169">
   </a>
  </h2>
  <p>
   Use
   <b>
    Apply Gain and Offset
   </b>
   to apply a simple gain and offset correction to a set of bands.
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   multiplies the selected bands by an input gain value and adds an offset value that you define.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   applies gains and offsets to ENVISAT/MERIS geophysical (non-reflectance) products, so you do not need to apply them to these products.
  </p>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Radiometric Correction &gt; Apply Gain and Offset
    </b>
    .
   </li>
   <li value="2">
    Select an input file and perform optional spatial and spectral
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , then click
    <b>
     OK
    </b>
    . The Gain and Offset Values dialog appears.
   </li>
   <li value="3">
    In the
    <b>
     Gain Values
    </b>
    list, select a band name.
   </li>
   <li value="4">
    In the
    <b>
     Edit Selected Item
    </b>
    field, edit the gain value of the item.
   </li>
   <li value="5">
    In the
    <b>
     Offset Values
    </b>
    list, select a band name.
   </li>
   <li value="6">
    In the
    <b>
     Edit Selected Item
    </b>
    field, edit the offset value of the item.
   </li>
   <li value="7">
    Repeat this selection and assignment of values for each band to process. To reset all of the bands to their original values, click
    <b>
     Reset
    </b>
    .
   </li>
   <li value="8">
    Select an output data type from the
    <b>
     Output Data Type
    </b>
    drop-down list.
   </li>
   <li value="9">
    Click
    <b>
     OK
    </b>
    .
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    adds the resulting output to the Layer Manager.
   </li>
  </ol>
  <h2>
   <a name="Applying">
   </a>
   Cross-Track Illumination Correction
   <a name="kanchor170">
   </a>
  </h2>
  <p>
   Use
   <b>
    Cross-Track Illumination Correction
   </b>
   to remove variation in the cross-track illumination of an image. Cross track illumination variations may be due to vignetting effects, instrument scanning, or other non-uniform illumination effects. Along-track mean values are calculated and you can plot them to show the mean variation in the cross-track direction. A polynomial function, with an order that you define, is fit to the means and used to remove the variation.
  </p>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Radiometric Correction &gt; Cross-Track Illumination Correction
    </b>
    . The Input File dialog appears.
   </li>
   <li value="2">
    Select an input file and perform optional spatial and spectral
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , and/or masking, then click
    <b>
     OK
    </b>
    . The Cross Track Illumination Correction Parameters dialog appears.
   </li>
   <li value="3">
    Select the cross track direction by selecting the check box next to either
    <b>
     Samples
    </b>
    or
    <b>
     Lines
    </b>
    .
   </li>
   <li value="4">
    Select either an
    <b>
     Additive
    </b>
    or
    <b>
     Multiplicative
    </b>
    correction method. The Additive method will subtract the fitted polynomial from the data and the Multiplicative method will divide the data by the fitted polynomial.
   </li>
   <li value="5">
    Enter the polynomial order and click
    <b>
     Plot Polynomial
    </b>
    . A plot of the mean data values display in red with the selected polynomial fit overlaid in white. It is best to use a low order polynomial so as not to remove the local variation in the data.
   </li>
   <p>
    You can change the polynomial order and plot it again.
   </p>
   <li value="6">
    Select output to
    <b>
     File
    </b>
    or
    <b>
     Memory
    </b>
    .
   </li>
   <li value="7">
    Click
    <b>
     OK
    </b>
    .
   </li>
  </ol>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   The
   <b>
    Cross-Track Illumination Correction
   </b>
   plot drop-down buttons are not active until you close the Cross Track Illumination Correction Parameters dialog.
  </p>
  <h2>
   <a name="EFFORT">
   </a>
   EFFORT Polishing
  </h2>
  <p>
   Use
   <b>
    Effort Polishing
   </b>
   to run
   <a name="kanchor171">
   </a>
   <a name="kanchor172">
   </a>
   Empirical Flat Field Optimal Reflectance Transformation (EFFORT) to determine and apply mild adjustments to apparent reflectance data, so the spectra appear more like spectra of real materials.
  </p>
  <h3>
   Summary
  </h3>
  <p>
   Consistent noise or error features may appear in hyperspectral apparent reflectance data because of the limited accuracy of the standards, measurements, and models that were used and the limited accuracy of calibrations performed along the data signal processing chain. This cumulative error may be several percent in each spectral band, leading to apparent reflectance data with absolute accuracies far less than the actual precision of the original data.
  </p>
  <p>
   EFFORT searches for a mild linear correction, bootstrapped from the data themselves, that polishes out this error and attempts to improve the accuracy of the apparent reflectance data. The EFFORT correction applies statistically mild adjustments to every band (gains near 1 and offsets near 0) that make a visual improvement in the apparent reflectance spectra. This removal of the cumulative errors of calibration and atmospheric correction allows improved comparison of EFFORT corrected spectra to library spectra.
  </p>
  <p>
   The EFFORT process is similar to the Empirical Line method of data calibration, which matches data spectra to field-measured spectra. EFFORT, however, uses no ground truth data, and the EFFORT-calculated gains and offsets are applied to atmospherically corrected apparent reflectance data (for example, output from the
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   Atmospheric Correction Module:&#160;QUAC® and FLAASH™). EFFORT uses the data to generate “pseudo field” spectra by fitting each observed spectrum with a parametric model of Legendre polynomials optionally augmented with real spectra. Gains and offsets for every band are calculated by comparing the modeled spectra to the data spectra, for pixels that are well-fit. A number of spectra are used that span the entire albedo range to give good leverage for the linear regression process, and the data values versus modeled values are fit with a line for every band. The slope and offset of this line are used to correct the apparent reflectance data for the error features. You can apply gain-only corrections to fix the model-to-data offset to 0.
  </p>
  <p>
   You can use one or more reality boost spectra (spectra from spectral libraries or field spectra) to help in the modeling. Using a few spectra that you know are characteristic of your area as reality boost spectra can produce better-fitting modeled spectra. The modeled spectra are created by a linear combination of the Legendre and reality boost spectra. Therefore, reality boost spectra that contain sharp features, such as the vegetation red edge, when used to augment the Legrendre basis set, can produce a better model, giving better EFFORT correction factors and/or offsets.
  </p>
  <p>
   EFFORT works on one or more wavelength segments that you enter. Wavelengths ranges that contain only noise (for example, the 1.4 μm and 1.9 μm water vapor absorption bands) should not be used in the calculation.
  </p>
  <p>
   Typically three segments are defined around the two large water vapor bands; bands before the 1.4 μm water vapor band, bands between the 1.4 and 1.9 μm water vapor bands, and bands past the 1.9 μm water vapor band. Each segment must start and end with a valid band. You can set bands within a segment that contain large, known errors but that are critical to further analysis as invalid, so they are not used in the initial spectral modeling.
  </p>
  <p>
   Invalid bands may include overlapping spectral bands, bands with ringing around the 0.94 and 1.14 μm water vapor bands, and O
   <sub>
    2
   </sub>
   and CO
   <sub>
    2
   </sub>
   under-corrected or over-corrected bands. These invalid bands are not used in the modeling but will be corrected on output. The order of the Legendre polynomial that is used to model the spectra is set by you through trial and error (though the default value provided should work in most cases). You can model each segment with a different order polynomial.
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   Select a polynomial order that will fit the real data features without fitting the error features. Before running EFFORT, use spectral plots of the radiance data to select the wavelength segments and invalid bands to input into the EFFORT dialog.
  </p>
  <p>
   <b>
    References
   </b>
   <![CDATA[ ]]>
  </p>
  <p>
   Huntington, J. F. and Boardman, J. W., 1995, Semi-quantitative Mineralogical and geological mapping with 1995 AVIRIS data,
   <i>
    Proc. Spectral Sensing Research ‘95
   </i>
   , ISSSR, Published by the AGPS, 26 Nov - 1 Dec, 1995, Melbourne, Australia.
  </p>
  <p>
   Boardman, J. W., 1997, Mineralogic and geochemical mapping at Virginia City, Nevada using 1995 AVIRIS data, in
   <i>
    Proceedings of the Twelfth Thematic Conference on Geological Remote Sensing
   </i>
   , Environmental Research Institute of Michigan, Denver, CO, pp. 21-28.
  </p>
  <h3>
   Select EFFORT Input
  </h3>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Radiometric Correction &gt; EFFORT Polishing
    </b>
    . The Input File dialog appears.
   </li>
   <li value="2">
    Select an input file and perform optional spatial
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , then click
    <b>
     OK
    </b>
    . The EFFORT Input Parameters dialog appears.
   </li>
   <li value="3">
    Click
    <b>
     Enter New Segment
    </b>
    . A segment appears in the
    <b>
     Segment Information
    </b>
    list.
   </li>
   <li value="4">
    Click
    <b>
     Edit
    </b>
    next to the new segment. The Segment Spectral Subset dialog appears with all bands highlighted by default.
   </li>
   <li value="5">
    <p>
     Select the starting and ending bands for this segment using
     <b>
      Add Range
     </b>
     ; by clicking and dragging over the list of bands; or by clicking on the first band, holding down the
     <b>
      Shift
     </b>
     key, and clicking on the last band.
    </p>
    <p>
     To set bands contained within a segment to an invalid state so that they will not be used in computing the EFFORT correction, press the
     <b>
      Ctrl
     </b>
     key and click the bands to toggle them off. These data will not be adjusted and are set to 0. Invalid bands will not be used in the modeling, but they will be adjusted by EFFORT.
    </p>
   </li>
   <li value="6">
    Click
    <b>
     OK
    </b>
    .
   </li>
   <li value="7">
    <p>
     To change the order of the Legendre polynomial used to fit this segment, enter the desired order in the
     <b>
      Order
     </b>
     field next to the segment information.
    </p>
    <p>
     A lower-order polynomial produces a flatter spectrum, which gives more error suppression. However, it may also remove some actual reflectance features. A higher-order polynomial produces a spectrum that fits the data better but it also may fit some error features, which leaves them in the resulting output. To find a polynomial order that fits only real data, use a trial-and-error method.
    </p>
   </li>
   <li value="8">
    Enter new segments until all the spectral segments are defined.
   </li>
   <li value="9">
    To remove the last segment entered, click
    <b>
     Delete Last Segment
    </b>
    .
   </li>
  </ol>
  <h4>
   Add Reality Boost Spectra
  </h4>
  <p>
   To input reality boost spectra:
  </p>
  <ol>
   <li value="1">
    In the EFFORT Input Parameters dialog, click
    <b>
     Input Reality Boost Spectra
    </b>
    . An endmember collection dialog appears.
   </li>
   <li value="2">
    <a href="../FindFeatures/Classification/ClassificationTools/ImportingSpectra.htm">
     Import the desired spectra
    </a>
    . For details, see Endmember Options and Managing Endmember Spectra. The Reality Boost Spectra Options dialog appears.
   </li>
   <li value="3">
    Toggle each
    <b>
     Continuum Remove?
    </b>
    to select whether or not to use a continuum removal on the reality boost spectrum.
   </li>
   <ul>
    <li value="1">
     To incorporate the spectral features and not the overall spectral shape, use continuum removal.
    </li>
    <li value="2">
     If the overall shape of the spectrum is important, (for example, vegetation spectra), do not use continuum removal.
    </li>
   </ul>
   <li value="4">
    Click
    <b>
     OK
    </b>
    .
   </li>
   <li value="5">
    In the EFFORT Input Parameters dialog, click
    <b>
     Edit
    </b>
    to change the reality boost spectra options, or click
    <b>
     Delete
    </b>
    to delete any of the input reality boost spectra.
   </li>
  </ol>
  <h3>
   Set EFFORT Parameters
  </h3>
  <p>
   Use the EFFORT Input Parameters dialog to set parameters for the EFFORT processing before executing EFFORT.
  </p>
  <ol>
   <li value="1">
    In the
    <b>
     Number of Points
    </b>
    field, enter the total number of spectra to use in the EFFORT process. You should use at least 1,000 points, but no more than 10% of the total image size.
   </li>
   <li value="2">
    Enter a value for
    <b>
     Albedo Bins
    </b>
    to divide the albedo range into and select spectra from. The number of spectra used in each albedo bin is the total number of points divided by the number of albedo bins. This ensures that spectra with a range of albedo are used in the modeling.
   </li>
   <li value="3">
    Toggle
    <b>
     EFFORT Calculation
    </b>
    to calculate gain and offset values or gain values only.
   </li>
   <ul>
    <li value="1">
     To correct your data for gain values only, select
     <b>
      Gain
     </b>
     . These include errors in the radiometric calibration, atmospheric transmittance model, and solar irradiance model.
    </li>
    <li value="2">
     To correct your data for both gain error and offset error, which include errors in the dark current and path radiance model, select
     <b>
      Gain and Offset
     </b>
     .
    </li>
    <li value="3">
     To save the gain and offset values to an ASCII file, specify a filename in the
     <b>
      Enter Output Gainoff Filename [.txt]
     </b>
     field.
    </li>
   </ul>
   <li value="4">
    Click the
    <b>
     Apply Results?
    </b>
    toggle button to apply the calculated gain and offset values to the input data.
   </li>
   <ul>
    <li value="1">
     If you select
     <b>
      No
     </b>
     , the gain and offset values appear in a plot window when you click
     <b>
      OK
     </b>
     in the EFFORT Input Parameters dialog, and no other output will be generated.
    </li>
    <li value="2">
     If you select
     <b>
      Yes
     </b>
     , select output to
     <b>
      File
     </b>
     or
     <b>
      Memory
     </b>
     . The gain and offset values appear in a plot window when you click
     <b>
      OK
     </b>
     in the EFFORT Input Parameters dialog, and an EFFORT-corrected apparent reflectance output file is created, using the filename you specify in
     <b>
      Enter Output Filename
     </b>
     .
    </li>
    <li value="3">
     To overwrite the input file with the EFFORT output, set the
     <b>
      In Place?
     </b>
     toggle button to
     <b>
      Yes
     </b>
     . Note that you cannot interrupt this process without corrupting the input data file.
    </li>
   </ul>
   <li value="5">
    Click
    <b>
     OK
    </b>
    . The processing is completed in three steps, shown by three status processing dialogs.
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    adds the resulting output to the Layer Manager, and the gain and offset values appear in a plot window.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>