<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Band Math
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../ENVIHelp_CSH.htm#PreprocessImagery/BandMath.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <h1>
   Band Math
   <a name="kanchor852">
   </a>
  </h1>
  <p>
   <b>
    Band Math
   </b>
   is a flexible image processing tool with many capabilities not available in any other image processing system. You can use the Band Math dialog to define bands or files used as input, to call a user Band Math function, and to write the result to a file or memory. The Band Math function accesses data spatially by mapping variables to bands or files. Spatial data that are too large to read entirely into memory are automatically accessed using data tiling.
  </p>
  <p>
   The following figure depicts Band Math processing that adds three bands. Each band in the expression is mapped to an input image band, summed, and output as the resulting image data. You can map one or more of the expression’s variables to a file instead of mapping each variable to a single band. The resulting output is a new image file. For example, in the expression b1 + b2 + b3, if b1 is mapped to a file and b2 and b3 are mapped to a single band, then the resulting image file contains the bands of the b1 file summed with b2 and b3.
  </p>
  <p>
   <img src="../Resources/Images/PreprocessImagery/bandmath.gif" />
  </p>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#Requirem">
     Requirements
    </a>
   </li>
   <li value="2">
    <a href="#Enter">
     Enter Mathematical Expressions
    </a>
   </li>
   <li value="3">
    <a href="#Assign">
     Assign Values to Variables
    </a>
   </li>
  </ul>
  <h2>
   <a name="Requirem">
   </a>
   Requirements
  </h2>
  <p>
   The Band Math tool has four basic requirements:
  </p>
  <ol>
   <li value="1">
    <p>
     <b>
      The Band Math expression must be a single IDL statement
     </b>
     : The syntax for defining your processing algorithm, or Band Math expression, is that of IDL. However, simple Band Math expressions do not require prior knowledge of IDL. If you plan to perform complex processing, refer to IDL&#160;Tips for Use in Band Math.
    </p>
    <p>
     A Band Math expression must be a single IDL statement in the form of a function:
    </p>
    <pre>
     result = expression
    </pre>
    <p>
     In the Band Math dialog, enter only the
     <code>
      expression
     </code>
     part of the function. Your expression can include any valid IDL function, including those that you write yourself.
    </p>
   </li>
   <li value="2">
    <b>
     All input bands must have identical dimensions
    </b>
    : The expression is applied on a simple pixel-by-pixel basis. Therefore, the input bands (to which your expression is applied) must all have the same spatial dimensions in samples and lines. Furthermore, Band Math does not automatically coregister images that are georeferenced.
   </li>
   <li value="3">
    <p>
     <b>
      All variables in the expression must be named B
     </b>
     <i>
      n
     </i>
     <b style="font-style: normal;">
      (or b
     </b>
     <i>
      n
     </i>
     <b style="font-style: normal;">
      )
     </b>
     : The variables in the expression that represent input bands must begin with the character “b” or “B” followed by up to 5 numeric characters. For example, all of the following expressions are valid when adding three bands:
    </p>
    <pre>
     b1 + b2 + b3
    </pre>
    <pre>
     B1 + B11 + B111
    </pre>
    <pre>
     B1 + b2 + B3
    </pre>
   </li>
   <li value="4">
    The result must be a band of the same dimension as the input bands: The expression must produce a result with the same spatial dimensions in samples and lines as the input bands.
   </li>
  </ol>
  <h2>
   <a name="Enter">
   </a>
   Enter Mathematical Expressions
  </h2>
  <ol>
   <li value="1">
    <p>
     From the Toolbox, select
     <b>
      Band Ratio &gt; Band Math
     </b>
     . The Band Math dialog appears.
    </p>
   </li>
   <li value="2">
    <p>
     In the Band Math dialog, enter the desired mathematical description, including variable names, into the
     <b>
      Enter an expression
     </b>
     field. Use variables in place of band names or filenames (the variables will be assigned in the next step). Variable names must begin with the character “b” or “B” followed by up to 5 numeric characters.
    </p>
    <p>
     For example, to calculate the average of three bands, use the following equation:
     <br />
     <br />
     <code>
      float(b1)+float(b2)+float(b3))/3.0
     </code>
     <br />
     <br />
     Three variables are used in this expression: B1, B2, and B3. Note that, in this example, the IDL function
     <code>
      float()
     </code>
     is used to prevent byte overflow errors during calculation.
    </p>
    <p>
     The Band Math dialog also contains the following functionality:
    </p>
    <ul>
     <li value="1">
      <b>
       Previous Band Math Expressions
      </b>
      : This list shows previously applied mathematical expressions. To apply an expression to a new set of bands, select it from the list and enter it into the
      <b>
       Enter an expression
      </b>
      field. Click
      <b>
       OK
      </b>
      .
     </li>
     <li value="2">
      <b>
       Save
      </b>
      : Save mathematical expressions to a file. The Save Expressions to a File dialog appears. Enter an output filename with an
      <code>
       .exp
      </code>
      extension. Click
      <b>
       OK
      </b>
      . You can save expressions to a file without having to first run them through the Band Math function.
     </li>
     <li value="3">
      <b>
       Restore
      </b>
      : Restore previously saved mathematical expressions. The Enter Expressions Filename dialog appears. Select a filename and click
      <b>
       OK
      </b>
      .
     </li>
     <li value="4">
      <b>
       Clear
      </b>
      : Clear all expressions from the
      <b>
       Previous Band Math Expressions
      </b>
      list.
     </li>
     <li value="5">
      <b>
       Delete
      </b>
      : Delete a single expression from the
      <b>
       Previous Band Math Expressions
      </b>
      list.
     </li>
     <li value="6">
      <b>
       Add to List
      </b>
      : To add an individual expression to the
      <b>
       Previous Band Math Expressions
      </b>
      list, enter it in the
      <b>
       Enter an expression
      </b>
      field and click
      <b>
       Add to List
      </b>
      .
     </li>
    </ul>
   </li>
   <li value="3">
    After entering a mathematical expression in the
    <b>
     Enter an expression
    </b>
    field, click
    <b>
     OK
    </b>
    . The Variables to Bands Pairings dialog appears.
   </li>
  </ol>
  <h2>
   <a name="Assign">
   </a>
   Assign Values to Variables
   <a name="kanchor853">
   </a>
  </h2>
  <p>
   Use the Variables to Bands Pairings dialog to assign bands from a list of input bands to variable names you entered in the
   <b>
    Enter an expression
   </b>
   field of the Band Math dialog.
  </p>
  <p>
   Using the example mathematical expression
   <code>
    (float(b1)+float(b2)+float(b3))/3.0
   </code>
   ,
  </p>
  <ol>
   <li value="1">
    In the
    <b>
     Variables used in expression
    </b>
    field, select the variable
    <br />
    <b>
     B1 - [undefined]
    </b>
    .
   </li>
   <li value="2">
    Select the band in the
    <b>
     Available Bands List
    </b>
    . When the first band is selected, only those bands with the same spatial dimensions are shown in the band list.
   </li>
   <li value="3">
    Continue to assign a value to B2, B3, and so forth in the same manner.
   </li>
  </ol>
  <h3>
   Map Variables to Multiband Images
   <a name="kanchor854">
   </a>
  </h3>
  <p>
   You can assign a multiband image as one or all of the variables (using an image file as a variable is considered File Math).
  </p>
  <ol>
   <li value="1">
    In the Variables to Bands Pairings dialog, select a variable in the
    <b>
     Variables used in expression
    </b>
    field.
   </li>
   <li value="2">
    Click
    <b>
     Map Variable to Input File
    </b>
    .
   </li>
   <li value="3">
    Select an input file the Input File dialog, and perform optional
    <a href="../NoTOCTopics/Subsetting.htm">
     spatial subsetting
    </a>
    , then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="4">
    Continue to assign a value to B2, B3, and so forth in the same manner. If more than one file is used, they must have the same number of bands.
   </li>
   <li value="5">
    Select output to
    <b>
     File
    </b>
    or
    <b>
     Memory
    </b>
    .
   </li>
   <li value="6">
    Click
    <b>
     OK
    </b>
    . A multiband output image is produced for File Math modified by the math expression.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>