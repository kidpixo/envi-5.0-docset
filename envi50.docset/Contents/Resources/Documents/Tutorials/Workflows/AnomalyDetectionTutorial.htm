<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Tutorials|Using Workflows" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Anomaly Detection Tutorial
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#Tutorials/Workflows/AnomalyDetectionTutorial.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../Tutorials.htm">
    Tutorials
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../Tutorials.htm">
    Using Workflows
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Anomaly Detection
   </span>
  </div>
  <h1>
   Anomaly Detection Tutorial
  </h1>
  <p>
   In this tutorial, you will use the Anomaly Detection workflow to detect spectral or color differences between layers and extract unknown targets that are spectrally distinct from the image background. Specifically, you will look for man-made buildings in a desert scene. Anomaly detection is effective when the anomalous targets are sufficiently small, relative to the background.
  </p>
  <p>
   <b>
    References
   </b>
  </p>
  <p>
   Chang, Chein-I, and Shao-Shan Chiang, 2002. Anomaly detection and classification for hyperspectral imagery.
   <i>
    IEEE Transactions on Geoscience and Remote Sensing
   </i>
   , Vol. 40, No. 6, pp. 1314-1325.
  </p>
  <p>
   Reed I. S., and X. Yu, Adaptive multiple-band CFAR detection of an optical pattern with unknown spectral distribution.
   <i>
    IEEE Trans. Acoustics, Speech and Signal Proc
   </i>
   . 38, pp. 1760-1770, October 1990.
  </p>
  <h2>
   Files Used in this Tutorial
  </h2>
  <p>
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   Resource DVD:
   <code>
    anomaly_detection
   </code>
  </p>
  <table style="margin-left: 0;margin-right: auto;caption-side: top;mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0" class="TableStyle_Description">
   <col />
   <col />
   <thead>
    <tr>
     <th class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p class="TableHead">
       File
      </p>
     </th>
     <th class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p class="TableHead">
       Description
      </p>
     </th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <pre xml:space="preserve">
       05MAY17094255-M1BS-000000208296_01_P002.dat
      </pre>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       QuickBird image of Libya
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
      <pre xml:space="preserve">
       05MAY17094255-M1BS-000000208296_01_P002.hdr
      </pre>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
      <p>
       Header file for above
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2>
   Selecting a File for Anomaly Detection
  </h2>
  <ol>
   <li value="1">
    Start
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    .
   </li>
   <li value="2">
    From the Toolbox, select
    <b>
     Anomaly Detection &gt; Anomaly Detection Workflow
    </b>
    . The Select File panel appears.
   </li>
   <li value="3">
    Click
    <b>
     Browse
    </b>
    . The Anomaly Detection Input File dialog appears.
   </li>
   <li value="4">
    Click
    <b>
     Open File
    </b>
    . The Open dialog appears.
   </li>
   <li value="5">
    Navigate to
    <code>
     anomaly_detection
    </code>
    , select
    <code>
     05MAY17094255-M1BS-000000208296_01_P002.dat
    </code>
    , and click
    <b>
     Open
    </b>
    .
   </li>
   <li value="6">
    Click
    <b>
     OK
    </b>
    in the Anomaly Detection Input File dialog.
    <p>
     Anomaly Detection works with all bands of a multispectral file, so you will not need to perform any spectral subsetting. Spatial subsetting is available; however, you won't need it for this exercise.
    </p>
    <p>
     The area of interest you will focus on in this exercise is located in the upper-right corner of the workflow view.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/AnomalyArea.gif" alt="Area of interest" />
    </p>
   </li>
   <li value="7">
    Click
    <b>
     Next
    </b>
    to proceed to the Anomaly Detection panel, where you set parameters.
   </li>
  </ol>
  <h2>
   Anomaly Detection
  </h2>
  <p>
   In this step of the workflow, you will try several different parameter settings to determine which will provide a good result.
  </p>
  <ol>
   <li value="1">
    Keep the
    <b>
     Anomaly Detection Method
    </b>
    at
    <b>
     RXD
    </b>
    and use the default RXD settings.
   </li>
   <li value="2">
    Change the
    <b>
     Mean Calculation Method
    </b>
    to
    <b>
     Local
    </b>
    from the drop-down list. With this method, the mean spectrum will be derived from a localized kernel around the pixel.
   </li>
   <li value="3">
    <p>
     Enable the
     <b>
      Preview
     </b>
     check box. A Preview Portal appears. As you move the Preview Portal around, areas that are identified as anomalies in the original image display as white areas in the Preview Portal. The current settings highlight the anomaly in the upper-right corner of the Image window, though there is a lot of visible noise in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/RXDPreview1.gif" alt="RXD Results in Preview Portal" />
    </p>
   </li>
   <li value="4">
    <p>
     Keep the Preview Portal open and change the
     <b>
      Anomaly Detection Method
     </b>
     setting to
     <b>
      UTD
     </b>
     . UTD and RXD work identically, but instead of using a sample vector from the data, as with RXD, UTD uses the unit vector. UTD extracts background signatures as anomalies and provides a good estimate of the image background.
    </p>
    <p>
     Check the result in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/UTDPreview.gif" alt="UTD results in Preview Portal" />
    </p>
   </li>
   <li value="5">
    <p>
     Continue to keep the Preview Portal open. This time, change the
     <b>
      Anomaly Detection Method
     </b>
     setting to
     <b>
      RXD-UTD
     </b>
     , which is a hybrid of the previous two methods you tried. The best condition to use RXD-UTD in is when the anomalies have an energy level that is comparable to, or less than, that of the background. In those cases, using UTD by itself does not detect the anomalies, but using RXD-UTD enhances them.
    </p>
    <p>
     Check the result in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/RXD_UTDPreview1.gif" alt="RXD-UTD results in Preview Portal" />
    </p>
   </li>
   <li value="6">
    <p>
     Keep the detection method at
     <b>
      RXD-UTD
     </b>
     , but change the
     <b>
      Mean Calculation Method
     </b>
     to
     <b>
      Global
     </b>
     from the drop-down list. With this method setting, the mean spectrum will be derived from the entire dataset.
    </p>
    <p>
     Check the results in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/RXD_UTDPreview2.gif" alt="RXD-UTD results in Preview Portal" />
    </p>
   </li>
   <li value="7">
    <p>
     Finally, return the
     <b>
      Anomaly Detection Method
     </b>
     to
     <b>
      RXD
     </b>
     and leave the
     <b>
      Mean Calculation Method
     </b>
     at
     <![CDATA[ ]]>
     <b>
      Global
     </b>
     from the drop-down list.
    </p>
    <p>
     Check the results in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/RXDPreview3.gif" alt="RXD-UTD results in Preview Portal" />
    </p>
   </li>
   <li value="8">
    The preview of these settings appears to highlight anomalous areas more while filtering out more of the noise. You will use these settings to proceed.
   </li>
   <li value="9">
    Click
    <b>
     Next
    </b>
    to go to the Anomaly Thresholding panel,
   </li>
   <li value="10">
    Enter
    <code>
     0.15
    </code>
    in the
    <b>
     Anomaly Detection Threshold
    </b>
    field and press the
    <b>
     Enter
    </b>
    key.
   </li>
   <li value="11">
    <p>
     Enable the
     <b>
      Preview
     </b>
     check box and view the results in the Preview Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/RXDResult.gif" alt="Result of changing the threshold" />
    </p>
   </li>
   <li value="12">
    Click
    <b>
     Next
    </b>
    to go to the Export panel, where you can save the anomaly detection output.
   </li>
  </ol>
  <h2>
   Exporting Anomaly Detection Results
  </h2>
  <p>
   In the final step of the workflow, you will save the output from the analysis.
  </p>
  <p>
   To export results:
  </p>
  <ol>
   <li value="1">
    In the Export Files tab, keep the default settings for the exports:
    <ul>
     <li value="1">
      <b>
       Export Anomaly Detection Image
      </b>
      saves the thresholding result to an ENVI raster file.
     </li>
     <li value="2">
      <b>
       Export Anomaly Detection Vectors
      </b>
      saves  the vectors created during thresholding to a shapefile.
     </li>
    </ul>
   </li>
   <li value="2">
    Use the default paths and filenames.
   </li>
   <li value="3">
    <p>
     In the Additional Export tab, enable the check boxes for the remaining exports:
    </p>
    <ul>
     <li value="1">
      <b>
       Export Anomaly Detection Statistics
      </b>
      saves statistics on the thresholding image. The output area units are in square meters.
     </li>
     <li value="2">
      <b>
       Export Unthresholded Anomaly Detection Image
      </b>
      saves the unthresholded anomaly detection image to an ENVI raster.
     </li>
    </ul>
   </li>
   <li value="4">
    Use the default paths and filenames.
   </li>
   <li value="5">
    Click
    <b>
     Finish
    </b>
    .
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    creates the output, opens the layers in the Image window, and saves the files to the directory you specified.
   </li>
   <li value="6">
    Finally, compare the original image to the anomaly detection image. In the Layer Manager, right-click on the Vector Layer and select
    <b>
     Remove
    </b>
    .
   </li>
   <li value="7">
    Open a Portal  and move the Portal to the upper-right in the Image window to the area where an anomaly appears.
   </li>
   <li value="8">
    <p>
     Adjust the Transparency so you can see both images in the Portal.
    </p>
    <p>
     <img src="../../Resources/Images/AnomalyDetection/ResultPortal.gif" alt="Portal" />
    </p>
   </li>
   <li value="9">
    Select
    <b>
     File &gt; Exit
    </b>
    to exit
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    .
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>