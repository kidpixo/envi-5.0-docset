<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Tutorials|Using Workflows" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Image Change Tutorial
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#Tutorials/Workflows/ImageChangeTutorial.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../Tutorials.htm">
    Tutorials
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="../Tutorials.htm">
    Using Workflows
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Image Change Detection
   </span>
  </div>
  <h1>
   Image Change Tutorial
  </h1>
  <p>
   In this tutorial, you will use the Image Change workflow to compare two images of an area over Indonesia that was impacted by the December 26, 2004 tsunami. The first image is a before image,  taken in April, 2004. The second image was taken in January, 2005.
  </p>
  <p>
   The first image shown below is from
   <code>
    tsunami_before.dat
   </code>
   , and the second image shows
   <code>
    tsunami_after.dat
   </code>
   in a Standard Portal. You can see in the portal that there are substantial differences between the two images when you adjust the Transparency sliders on the toolbar. Specifially, many vegetation areas were washed out by the tsunami.
  </p>
  <p>
   <img src="../../Resources/Images/ImageChange/InputImage.gif" alt="Before image" />
  </p>
  <p>
   <img src="../../Resources/Images/ImageChange/InputImagePortal.gif" alt="After image" />
  </p>
  <h2>
   Optional Tutorial
  </h2>
  <p>
   As an optional tutorial, you can supply your own data that is not aligned, and after Selecting Files for Image Change Detection you choose the option to
   <b>
    Register Images Automatically
   </b>
   . Use the steps in
   <a href="../../Detection/Image_Change_Detection/ImageChange.htm#co-register">
    Register Images Automatically
   </a>
   align the images.
  </p>
  <p>
   <a name="References">
   </a>
   <b>
    References
   </b>
   <![CDATA[
]]>
  </p>
  <p>
   Image Change Detection:
  </p>
  <p class="indent">
   Normalized Difference Vegetation Index (NDVI): Jensen, J. R., 1986.
   <i>
    Introductory Digital Image Processing
   </i>
   , Prentice-Hall, New Jersey, p. 379.
  </p>
  <p class="indent">
   Normalized Difference Water Index (NDWI): McFeeters, S.K., 1996. The use of normalized difference water index (NDWI) in the delineation of open water features,
   <i>
    International Journal of Remote Sensing
   </i>
   , 17(7):1425–1432.
  </p>
  <p class="indent">
   Normalized Difference Built-up Index (NDBI): Zha, Y., J. Gao, and S. Ni, 2003. Use of normalized difference built-up index in automatically mapping urban areas from TM imagery,
   <i>
    International Journal of Remote Sensing
   </i>
   , 24(3):583–594.
  </p>
  <p class="indent">
   Burn Index: Burn Index uses an opposite Normalized Burn Ratio (NBR), which is -NBR. The NBR reference is Key, C.H.; Z. Zhu; D. Ohlen; S. Howard; R. McKinley; and N. Benson, 2002. The normalized burn ratio and relationships to burn severity: ecology, remote sensing and implementation. In J.D. Greer, ed.
   <i>
    Rapid Delivery of Remote Sensing Products
   </i>
   . Proceedings of the Ninth Forest Service Remote Sensing Applications Conference, San Diego, CA 8-12 April, 2002. American Society for Photogrammetry and Remote Sensing, Bethesda, MD.
  </p>
  <p>
   Auto-thresholding:
  </p>
  <p class="indent">
   Otsu's: Otsu, N. A threshold selection method from gray-level histograms.
   <i>
    IEEE Trans. Systems Man Cybernet
   </i>
   . Vol. 9, pp. 62–66, 1979.
  </p>
  <p class="indent">
   Tsai's: Tsai, W. Moment-preserving thresholding.
   <i>
    Comput. Vision Graphics Image Process
   </i>
   . Vol. 29, pp. 377–393, 1985.
  </p>
  <p class="indent">
   Kapur's: Kapur, J., Sahoo, P., Wong, A. A new method for graylevel picture thresholding using the entropy of the histogram.
   <i>
    Comput. Vision Graphics Image Process
   </i>
   . Vol. 29 (3), pp. 273–285.
  </p>
  <p class="indent">
   Kittler's: Kittler, J., Illingworth, J., Minimum error thresholding,
   <i>
    Pattern Recogn
   </i>
   . Vol. 19, pp. 41–47, 1986.
  </p>
  <h2>
   Files Used in this Tutorial
  </h2>
  <p>
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   Resource DVD:
   <code>
    change_detection
   </code>
  </p>
  <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Description.css');margin-left: 0;margin-right: auto;" cellspacing="0" class="TableStyle_Description">
   <col />
   <col />
   <thead>
    <tr>
     <th class="TableStyle_Description_Head_0_0_RowSep_ColSep">
      <p class="TableHead">
       File
      </p>
     </th>
     <th class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
      <p class="TableHead">
       Description
      </p>
     </th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <pre xml:space="preserve">
       tsunami_before.dat
      </pre>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       QuickBird image over Indonesia, April, 2004
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
      <pre xml:space="preserve">
       tsunami_before.hdr
      </pre>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
      <p>
       Header file for above
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
      <pre xml:space="preserve">
       tsunami_after.dat
      </pre>
     </td>
     <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
      <p>
       QuickBird image over Indonesia, January, 2005
      </p>
     </td>
    </tr>
    <tr>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
      <pre xml:space="preserve">
       tsunami_after.hdr
      </pre>
     </td>
     <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
      <p>
       Header file for above
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2>
   Selecting Files for Image Change
  </h2>
  <p>
   In the File Selection panel, you choose the two images to include in image change detection.
  </p>
  <ol>
   <li value="1">
    Start
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    .
   </li>
   <li value="2">
    From the Toolbox, select
    <b>
     Change Detection &gt; Image Change Workflow
    </b>
    . The Select File panel appears.
   </li>
   <li value="3">
    Click
    <b>
     Browse
    </b>
    next to the
    <b>
     Time 1 File
    </b>
    field. The Select Time 1 Input File dialog appears.
   </li>
   <li value="4">
    Click
    <b>
     Open File
    </b>
    . The Open dialog appears.
   </li>
   <li value="5">
    Navigate to
    <code>
     change_detection
    </code>
    , select
    <code>
     tsunami_before.dat
    </code>
    , and click
    <b>
     Open
    </b>
    .
   </li>
   <li value="6">
    Click
    <b>
     OK
    </b>
    .
   </li>
   <li value="7">
    Click
    <b>
     Browse
    </b>
    next to the
    <b>
     Time 2 File
    </b>
    field. The Select Time 2 Input File dialog appears.
   </li>
   <li value="8">
    Click
    <b>
     Open File
    </b>
    . The Open dialog appears.
   </li>
   <li value="9">
    Navigate to
    <code>
     change_detection
    </code>
    , select
    <code>
     tsunami_after.dat
    </code>
    , and click
    <b>
     Open
    </b>
    .
   </li>
   <li value="10">
    Click
    <b>
     Next
    </b>
    . The Image Registration panel displays.
   </li>
   <li value="11">
    Since the Time 1 and Time 2 images are co-registered already, keep the default selection of
    <b>
     Skip Image Registration
    </b>
    .
   </li>
   <li value="12">
    Click
    <b>
     Next
    </b>
    . The Change Method Choice panel appears.
   </li>
   <li value="13">
    Keep the default selection of
    <b>
     Image Difference
    </b>
    , and click
    <b>
     Next
    </b>
    . The Image Difference panel appears.
   </li>
  </ol>
  <h2>
   Image Difference Settings
  </h2>
  <p>
   In the Image Difference panel, set the parameters to use for the difference analysis. In this step, you perform an image difference analysis based on a band or feature index. the feature index provides options to detect changes of a specific feature, such as vegetation, water, built-up areas, or fire burn areas. For the QuickBird data used in this exercise, Vegetation Index (NDVI) and Water Index (NDWI) are available. Built-up Index and Burn Index are available only if if an image has a shortwave infrared band, such as Landsat data,
  </p>
  <ol>
   <li value="1">
    The
    <b>
     Difference of Input Band
    </b>
    option and
    <code>
     Band 1
    </code>
    were selected by default.
   </li>
   <li value="2">
    In the toolbar
    <b>
     Go To
    </b>
    field, enter
    <code>
     746319.499,585303.471
    </code>
    and press the
    <b>
     Enter
    </b>
    key on the keyboard. The view centers over the area.
   </li>
   <li value="3">
    <p>
     Enable the
     <b>
      Preview
     </b>
     check box. A Preview Portal appears. In the Preview Portal, areas that decreased in the data value of the selected band appear as red, and areas that increased appear as blue.
    </p>
    <p>
     <img src="../../Resources/Images/ImageChange/BandPreview.gif" alt="Band preview" />
    </p>
   </li>
   <li value="4">
    <p>
     With the Preview Portal still open, enable the
     <b>
      Difference of Feature Index
     </b>
     <![CDATA[ ]]>
     and keep
     <b>
      Vegetation Index (NDVI)
     </b>
     as the selected feature index.
    </p>
    <p>
     <img src="../../Resources/Images/ImageChange/FeatIdxPreview.gif" alt="Preview Portal" />
    </p>
   </li>
   <li value="5">
    Disable the
    <b>
     Preview
    </b>
    check box, then click
    <b>
     Next
    </b>
    . The difference analysis begins.
   </li>
   <li value="6">
    When image difference processing is complete, the difference image appears in the Image window and the Thresholding or Export panel appears.
   </li>
   <li value="7">
    Select
    <b>
     Apply Thresholding
    </b>
    . This option allows you to set parameters that help the algorithm determine which areas have big change. When you select this option, you can export multiple outputs at the end of the workflow. (If you select
    <b>
     Export Image Difference Only
    </b>
    , you will not be able to select additional processing parameters, and you can only export the difference image.)
   </li>
   <li value="8">
    Click
    <b>
     Next
    </b>
    . The Change Thresholding panel appears.
   </li>
  </ol>
  <h2>
   Change Thresholding
  </h2>
  <p>
   In the Change Thresholding step, specify change you want to show between the two images. You can use pre-set auto-thresholding techniques, and you can manually adjust thresholding.
  </p>
  <ol>
   <li value="1">
    In the
    <b>
     Auto-Thresholding
    </b>
    tab, select
    <b>
     Increase and Decrease
    </b>
    . This option shows areas of increase (in blue) and decrease (in red). (If you are only interested in areas of vegetation decreased by the tsunami, select
    <b>
     Decrease Only
    </b>
    .)
   </li>
   <li value="2">
    Enable the
    <b>
     Preview
    </b>
    check box. A Preview Portal opens.
   </li>
   <li value="3">
    <p>
     In the
     <b>
      Select Auto-Thresholding Method
     </b>
     drop-down list, try selecting each option, one at a time, then examine the result in the Preview Portal. The auto-thresholding choices are:
    </p>
    <ul>
     <li value="1">
      <b>
       Otsu's:
      </b>
      A histogram shape-based method. It is based on discriminate analysis and uses the zeroth- and the ﬁrst-order cumulative moments of the histogram for calculating the value of the thresholding level.
     </li>
     <li value="2">
      <b>
       Tsai's:
      </b>
      <![CDATA[ ]]>
      A moment-based method. It determines the threshold so that the ﬁrst three moments of the input image are preserved in the output image.
     </li>
     <li value="3">
      <b>
       Kapur's:
      </b>
      An entropy-based method. It considers the thresholding image as two classes of events, with each class characterized by a Probability Density Function (PDF). The method then maximizes the sum of the entropy of the two PDFs to converge on a single threshold value.
     </li>
     <li value="4">
      <b>
       Kittler's:
      </b>
      A histogram shape-based method. It works on approximating the histogram as a bimodal Gaussian distribution and finds a cutoff point. The cost function is based on the Bayes classification rule.
     </li>
    </ul>
    <p>
     The References at the beginning of this tutorial provide additional information about the auto-thresholding methods.
    </p>
   </li>
   <li value="4">
    <p>
     In this exercise, we will use the default
     <b>
      Otsu's
     </b>
     thresholding method. Below is an example of the Preview Portal with the
     <b>
      Otsu's
     </b>
     method selected.
    </p>
    <p>
     <img src="../../Resources/Images/ImageChange/otsus.gif" alt="Otsu method" />
    </p>
   </li>
   <li value="5">
    You can also experiment with manually adjusting the threshold settings. To do this, select the
    <b>
     Manual
    </b>
    tab.
   </li>
   <li value="6">
    Use the slider bars to adjust the
    <b>
     Increase Threshold
    </b>
    and
    <b>
     Decrease Threshold
    </b>
    settings, then view the changes in the Preview Portal.
   </li>
   <li value="7">
    When you are done experimenting with manual adjustments, click the
    <b>
     Reset
    </b>
    <img src="../../Resources/Images/IconsButtons/Reset.gif" class="VertCenter" alt="Reset" />
    button to return to the default settings.
   </li>
   <li value="8">
    Click
    <b>
     Next
    </b>
    . When you click
    <b>
     Next
    </b>
    , the difference image will be classified into
    <b>
     Big Increase
    </b>
    ,
    <b>
     Big Decrease
    </b>
    and
    <b>
     Other
    </b>
    , based on the threshold values.  The Cleanup panel appears.
   </li>
  </ol>
  <h2>
   Cleaning Up Image Change Results
  </h2>
  <p>
   The cleanup step refines the result.  You can preview what the refinement will like look before you apply the settings.
  </p>
  <ol>
   <li value="1">
    Enable the check boxes for both cleanup methods:
    <ul>
     <li value="1">
      <b>
       Enable Smoothing
      </b>
      removes salt-and-pepper noise.
     </li>
     <li value="2">
      <b>
       Enable Aggregation
      </b>
      <![CDATA[ ]]>
      removes small regions.
     </li>
    </ul>
   </li>
   <li value="2">
    Enter values for the cleanup methods:
    <ul>
     <li value="1">
      Specify the
      <b>
       Smooth Kernel Size
      </b>
      using an odd number (e.g., 3 = 3x3 pixels). The square kernel's center pixel will be replaced with the majority class value of the kernel. Keep the value at
      <b>
       5
      </b>
      .
     </li>
     <li value="2">
      Specify the
      <b>
       Aggregate Minimum Size
      </b>
      in pixels. Regions with a size of this value or smaller are aggregated to an adjacent, larger region.  Keep the value at
      <![CDATA[ ]]>
      <b>
       100
      </b>
      .
     </li>
    </ul>
   </li>
   <li value="3">
    <p>
     Preview the cleanup result before processing, enable the
     <b>
      Preview
     </b>
     check box. A Preview Portal appears.
    </p>
    <p>
     <img src="../../Resources/Images/ImageChange/IDcleanup.gif" alt="Preview of cleanup results" />
    </p>
    <p>
     You can change the cleanup settings and preview the results again, if desired.
    </p>
   </li>
   <li value="4">
    Click
    <b>
     Next
    </b>
    . The Export panel appears.
   </li>
  </ol>
  <h2>
   Exporting Image Change Results
  </h2>
  <p>
   In the final step of the workflow, you will save the output from the analysis.
  </p>
  <p>
   To export results:
  </p>
  <ol>
   <li value="1">
    In the
    <b>
     Export Files
    </b>
    tab, enable the check boxes for the exports:
    <ul>
     <li value="1">
      <b>
       Export Change Class Image
      </b>
      saves the thresholding result to a raster file.
     </li>
     <li value="2">
      <b>
       Export Change Class Vectors
      </b>
      saves  the vectors created during thresholding to a shapefile.
     </li>
    </ul>
   </li>
   <li value="2">
    Use the default paths and filenames.
   </li>
   <li value="3">
    <p>
     In the
     <b>
      Additional Export
     </b>
     tab, enable the check boxes for the remaining exports:
    </p>
    <ul>
     <li value="1">
      <b>
       Export Change Class Statistics
      </b>
      saves statistics on the thresholding image.
     </li>
     <li value="2">
      <b>
       Export Difference Image
      </b>
      saves  the difference image to a raster file.
     </li>
    </ul>
   </li>
   <li value="4">
    Use the default paths and filenames.
   </li>
   <li value="5">
    Click
    <b>
     Finish
    </b>
    .
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    creates the output, opens the layers in the Image window, and saves the files to the directory you specified.
   </li>
   <li value="6">
    Select
    <b>
     File &gt; Exit
    </b>
    to exit
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    .
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>