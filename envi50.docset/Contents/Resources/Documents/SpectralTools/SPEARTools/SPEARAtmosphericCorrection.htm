<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   SPEAR Atmospheric Correction
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#SpectralTools/SPEARTools/SPEARAtmosphericCorrection.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <h1>
   SPEAR Atmospheric Correction
   <a name="kanchor865">
   </a>
  </h1>
  <p>
   Atmospheric Correction is available within many of the SPEAR tools. For most spectral processing applications, working with atmospherically corrected data produces the most accurate results.
  </p>
  <p>
   Atmospheric correction methods available in SPEAR include:
  </p>
  <ul>
   <li value="1">
    <a href="#Dark">
     Dark object subtraction
    </a>
   </li>
   <li value="2">
    <a href="#Flat">
     Flat field correction
    </a>
   </li>
   <li value="3">
    <a href="#Internal">
     Internal average relative reflectance
    </a>
   </li>
   <li value="4">
    <a href="#Log">
     Log residuals
    </a>
   </li>
   <li value="5">
    <a href="#Empirica">
     Empirical line calibration
    </a>
   </li>
  </ul>
  <p>
   Rigorous, model-based methods (such as FLAASH™) are not available in SPEAR.
  </p>
  <p>
   The best method to use depends on your skill level, scene content, desired application, and available ancillary data. Dark object subtraction is the simplest method, requires no user input, and often produces good results. Conversely, the best possible results may be obtained with empirical line calibration. However, you must have good knowledge of the scene content and a spectral library containing signatures for materials contained within the scene.
  </p>
  <p>
   Descriptions of the atmospheric correction types follow.
  </p>
  <h2>
   None/Already Corrected
  </h2>
  <p>
   Select this option if you do not want atmospheric correction, or if the input file is already atmospherically corrected.
  </p>
  <h2>
   <a name="Dark">
   </a>
   Dark Object Subtraction
  </h2>
  <p>
   Dark object subtraction searches each band for the darkest pixel value. Assuming that dark objects reflect no light, any value greater than zero must result from atmospheric scattering. The scattering is removed by subtracting this value from every pixel in the band. This simple technique is effective for haze correction in multispectral data, but it should not be used for hyperspectral data.
  </p>
  <p>
   If you select dark object subtraction, additional settings are available by clicking
   <b>
    Show Advanced Parameters
   </b>
   . Dark objects can be determined by:
  </p>
  <ul>
   <li value="1">
    <b>
     Band Minimums:
    </b>
    Indicates whether to search for the dark objects in just the subsetted area, or in the entire image. Searching the entire image may take longer, but creates more accurate results. If the data contains black-filled pixels, enter the value of these pixels for the
    <b>
     Data ignore value
    </b>
    and enable the
    <b>
     Use ignore data value
    </b>
    check box.
   </li>
   <li value="2">
    <b>
     User Values:
    </b>
    Click
    <b>
     Edit Values
    </b>
    and manually enter values to subtract from each band in the Enter User Values dialog.
   </li>
  </ul>
  <h2>
   <a name="Flat">
   </a>
   Flat Field Calibration
  </h2>
  <p>
   Flat field calibration produces relative reflectance by dividing the mean spectrum of a user-defined ROI into the spectrum of each pixel in the image. ROIs you define should be a spectrally flat material within the wavelength range of the sensor. Beach sand and concrete are popular choices. Materials with spectral features, such as vegetation, are a poor choice. Since the mean spectrum of the ROI is divided into each pixel, the relative reflectance for pixels within the ROI will be flat and have a value around 1.0.
  </p>
  <ol>
   <li value="1">
    To perform flat field calibration, click
    <b>
     Create Flat Field ROI
    </b>
    . A display group opens with the input image loaded, and the ROI Tool dialog appears.
   </li>
   <li value="2">
    Use the ROI Tool to define an ROI for the desired flat field.
   </li>
   <li value="3">
    Click
    <b>
     Choose Flat Field ROI
    </b>
    on the Atmospheric Correction panel.
   </li>
   <li value="4">
    Select the ROI you created from the ROI Selection dialog list, then click
    <b>
     OK
    </b>
    .
   </li>
  </ol>
  <h2>
   <a name="Internal">
   </a>
   Internal Average Relative Reflectance
  </h2>
  <p>
   Internal average relative reflectance (IARR) is similar to flat field calibration in that a reference spectrum is divided into each pixel in the image to generate relative reflectance. The reference spectrum for IARR is the mean spectrum of the entire image, rather than that of a user-defined ROI. IARR requires no user input.
  </p>
  <h2>
   <a name="Log">
   </a>
   Log Residuals
  </h2>
  <p>
   The log residuals method produces a pseudo-reflectance dataset by dividing each pixel’s spectrum by the spectral geometric mean and the spatial geometric mean. No user input is required to run this method. Log residuals is generally effective for analyzing absorption features present in hyperspectral data.
  </p>
  <h2>
   <a name="Empirica">
   </a>
   Empirical Line Calibration
  </h2>
  <p>
   Empirical line calibration forces the image spectra to match reflectance spectra collected from the field. This method is capable of producing the most accurate results possible, but it requires ground truth information. In SPEAR, empirical line calibration requires a dark and bright target.
  </p>
  <ol>
   <li value="1">
    To create bright and dark targets, load the reference image into a new display group.
   </li>
   <li value="2">
    From the Display group menu bar, select
    <b>
     Overlay &gt; Region of Interest
    </b>
    . The ROI Tool dialog appears.
   </li>
   <li value="3">
    Create an ROI for both a dark and bright target, then select pixels with available ground truth spectra.
   </li>
   <li value="4">
    When the ROIs are defined for dark and bright targets, click
    <b>
     Select Data ROI
    </b>
    on the Atmospheric Correction panel. The ROI Selection dialog appears.
   </li>
   <li value="5">
    Select the appropriate ROI from the list, then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="6">
    <p>
     In the Atmospheric Correction panel, click
     <b>
      Select Library Spectrum
     </b>
     . The Library Selection dialog appears.
    </p>
    <p>
     By default, the spectral libraries in
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     are available. These libraries contain generic spectra for many man-made materials, vegetation, soils, rocks, and minerals. To use a custom spectral library, it must be already loaded in the Available Bands List.
    </p>
   </li>
   <li value="7">
    Select the spectral library from the list of open files, then click
    <b>
     OK
    </b>
    . The Spectrum Selection dialog displays.
   </li>
   <li value="8">
    Select the spectrum to use, then click
    <b>
     OK
    </b>
    . Select the spectral library containing ground truth spectra, then select ground truth spectrum within the library for the designated target.
   </li>
  </ol>
  <h2>
   Example Atmospheric Correction Results
  </h2>
  <p>
   The figures that follow show comparisons of the different atmospheric correction techniques applied to the same dataset. For the flat field calibration, an ROI on a bright, sandy beach was used. For empirical line calibration, asphalt and concrete from the pre-defined spectral libraries were used.
  </p>
  <p>
   For the spectral processing that SPEAR performs, having the correct spectral shape for an object is more important than obtaining the correct absolute reflectance values. Empirical line calibration is the most accurate method for both spectral shape and absolute reflectance values; however, it requires ground truth knowledge that is not always available. Dark object subtraction usually provides good spectral shape, but does not provide correct absolute reflectance values. Since the latter is not important for SPEAR’s processing, though, dark object subtraction typically provides the best balance between accuracy and simplicity.
  </p>
  <p>
   The following shows a comparison of atmospheric correction methods for vegetation:
  </p>
  <p>
   <img src="../../Resources/Images/Spectral/atcor_exampleveg_574x226.gif" style="margin-left: 29.00016px;margin-top: 5.99976px;margin-right: 26.02441px;margin-bottom: 2.681286px;width: 574;height: 226;" />
  </p>
  <p>
   The following shows a comparison of atmospheric correction methods for soil
  </p>
  <p>
   <img src="../../Resources/Images/Spectral/atcor_examplesoil_581x226.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 5.999752px;margin-bottom: 6.000484px;width: 581;height: 226;" />
  </p>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>