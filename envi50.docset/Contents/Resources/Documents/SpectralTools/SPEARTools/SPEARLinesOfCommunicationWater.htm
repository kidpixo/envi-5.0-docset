<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools|SPEAR Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   SPEAR Lines of Communication (LOC) - Water
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#SpectralTools/SPEARTools/SPEARLinesOfCommunicationWater.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="SpearTools.htm">
    SPEAR Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    SPEAR Lines of Communication (LOC) - Water
   </span>
  </div>
  <h1>
   SPEAR Lines of Communication (LOC) - Water
  </h1>
  <p>
   <a name="kanchor376">
   </a>
   The SPEAR LOC - Water tool streamlines spectral processing for mapping open and obscured waterway lines of communication (LOCs) using multispectral data.
  </p>
  <p>
   This tool highlights open and obscured waterways to aid manual digitization. Depending on your level of knowledge of water locations within the scene, you can process the scene using one of two different workflows:
  </p>
  <ul>
   <li value="1">
    Use the supervised spectral processing workflow if you can manually identify water of different types in the image.
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    uses the training data to locate every pixel that is spectrally similar to the identified water.
   </li>
   <li value="2">
    Use the unsupervised spectral processing workflow when you cannot manually identify water of different types in the image. This method uses Principal Components Analysis and/or a Normalized Difference Water Index algorithm to highlight areas containing water in the image.
   </li>
  </ul>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#Running">
     Run the LOC - Water Wizard
    </a>
   </li>
   <li value="2">
    <a href="#supervised_spectral_matching">
     Supervised (Spectral Matching)
    </a>
   </li>
   <li value="3">
    <a href="#unsupervised">
     Unsupervised (PCA, NDWI)
    </a>
   </li>
  </ul>
  <h2>
   <a name="Running">
   </a>
   Run the LOC - Water Wizard
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     SPEAR &gt; SPEAR LOC&#160;- Water
    </b>
    . The LOC - Water Wizard displays the File Selection panel.
   </li>
   <li value="2">
    Click
    <b>
     Select Input File
    </b>
    , choose a file, then click
    <b>
     OK
    </b>
    . The input image should be a multispectral file in any format readable by ENVI.
   </li>
   <li value="3">
    If wavelengths are not embedded in the image header, a series of Select Band dialogs appear. Select the Blue band, Green band, Red band, and NIR band, then click
    <b>
     OK
    </b>
    after each selection.
   </li>
   <li value="4">
    To optionally process only a portion of the scene, click
    <b>
     Select Subset
    </b>
    . A small Select Spatial Subset dialog appears.
   </li>
   <li value="5">
    Click
    <b>
     Spatial Subset
    </b>
    . The standard Select Spatial Subset dialog appears. When finished, click
    <b>
     OK
    </b>
    to return to the File Selection panel.
   </li>
   <li value="6">
    By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. To change the directory and/or root filename, click
    <b>
     Select Output Root Name
    </b>
    .
   </li>
   <li value="7">
    Click
    <b>
     Next
    </b>
    . The Method Selection panel appears.
   </li>
   <li value="8">
    Select one of the following processing methods, then click
    <b>
     Next
    </b>
    :
   </li>
   <ul>
    <li value="1">
     <b>
      <a href="#supervised_spectral_matching">
       Supervised (Spectral Matching)
      </a>
     </b>
     <![CDATA[ ]]>
    </li>
    <li value="2">
     <b>
      <a href="#unsupervised">
       Unsupervised (PCA, NDWI)
      </a>
     </b>
    </li>
   </ul>
   <li value="9">
    In the Digitize LOCs panel, select the image within the processing method to display. For example, if you select
    <b>
     Principal Components
    </b>
    from the
    <b>
     Examine Result for
    </b>
    drop-down list, there is a list of PCA images to select from (one per input spectral band).
   </li>
   <li value="10">
    <a name="Step10">
    </a>
    Click
    <b>
     Load
    </b>
    <i>
     image type
    </i>
    to load the image. The following appear:
   </li>
   <ul>
    <li value="1">
     One display group contains a natural color composite of the input image, to use as reference.
    </li>
    <li value="2">
     One display group contains the selected spectral processing result. This display group is dynamically linked to the natural color window. Use the dynamic overlay tool to see how the spectral processing result relates to the natural color reference image.
    </li>
    <li value="3">
     A histogram window appears for the spectral processing result display group to allow for adjusting the stretch to highlight water. For MF/SAM Ratio, MF, and NDWI results, water is always bright. For SAM, water is dark. For PCA, you must manually load each image to search for the one that highlights water. The water may be either bright or dark. Use
     <b>
      <a href="AutoFlicker.htm">
       Auto-Flicker
      </a>
     </b>
     to examine your results.
    </li>
    <li value="4">
     <p>
      The Vector Parameters dialog, containing one default vector layer (Water LOCs).
     </p>
     <p>
      The following shows an unstretched image (right) and stretched image (left) highlighting water in the spectral processing (imagery courtesy of DigitalGlobe)
     </p>
     <p>
      <img src="../../Resources/Images/Spectral/locwater_stretch_420x374.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 6.000454px;width: 420;height: 374;" />
     </p>
    </li>
   </ul>
   <li value="11">
    Use the Vector Parameters dialog to add new water vectors.
   </li>
   <ul>
    <li value="1">
     To create a new vector layer for digitization, click
     <b>
      Create
     </b>
     , in the Digitize LOCs panel and enter a descriptive layer name and a filename.
    </li>
    <li value="2">
     To import an existing vector layer so that new LOCs may be added to it, click
     <b>
      Import
     </b>
     . (The vector layer to import must already be open in ENVI.)
    </li>
    <li value="3">
     To remove a vector layer, select the layer to remove, then click
     <b>
      Remove
     </b>
     . You cannot remove the default layers.
    </li>
    <li value="4">
     At any time during digitizing, you can use the histogram to stretch the display group containing the spectrally processed result, or display a different result using the controls in the Display Results dialog.
    </li>
    <li value="5">
     <p>
      Vectors are saved automatically each time the displayed image changes, or before you move to the next step.
     </p>
     <p>
      The following shows digitized water (imagery courtesy of DigitalGlobe)
     </p>
     <p>
      <img src="../../Resources/Images/Spectral/locwater_digitize_299x314.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000469px;margin-bottom: 6.000484px;width: 299;height: 314;" />
     </p>
    </li>
   </ul>
   <li value="12">
    When digitizing LOCs is complete, click
    <b>
     Next
    </b>
    . The Export Vectors panel appears.
   </li>
   <li value="13">
    Optionally, select vector layers to export to separate files from the
    <b>
     Vector Output
    </b>
    list. The vectors you digitized are stored in separate files in
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    vector file (.evf) format. These vectors remain in the projection and datum of the input image. Each exported vector will result in the following files being created:
   </li>
   <ul>
    <li value="1">
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     vector file (
     <code>
      .evf
     </code>
     ) in the native image projection
    </li>
    <li value="2">
     ENVI vector file (
     <code>
      .evf
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="3">
     Shapefile (
     <code>
      .shp
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="4">
     Keyhole markup language file (
     <code>
      .kml
     </code>
     ) in Geographic/WGS84 projection for use in Google Earth
    </li>
   </ul>
   <li value="14">
    Click
    <b>
     Export Selected Layer(s)
    </b>
    . By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. Separate files are written for the Water LOC layer, plus any layers you created or imported.
   </li>
   <li value="15">
    Optionally, click
    <b>
     Export Selected Layer(s) to ArcGIS Geodatabase
    </b>
    . The Select Output Geodatabase dialog appears.
   </li>
   <li value="16">
    When you are finished exporting results, click
    <b>
     Next
    </b>
    in the Export Vectors panel, then click
    <b>
     Finish
    </b>
    to exit the Wizard.
   </li>
  </ol>
  <h2>
   <a name="supervised_spectral_matching">
   </a>
   Supervised (Spectral Matching)
  </h2>
  <ol>
   <li value="1">
    When you select
    <b>
     Supervised (Spectral Matching)
    </b>
    , then click
    <b>
     Next
    </b>
    in the Method Selection panel, the Atmospheric Correction panel appears.
   </li>
   <li value="2">
    <a href="SPEARAtmosphericCorrection.htm">
     Select an atmospheric correction method
    </a>
    . Dark object subtraction produces good results with minimal user input.
   </li>
   <li value="3">
    When atmospheric correction is complete, click
    <b>
     Next
    </b>
    . A natural color composite image is loaded into a display group, the ROI dialog appears pre-loaded with default ROIs (Muddy Water and Dark Water), and the Select Training Pixels panel appears.
   </li>
   <li value="4">
    Use the ROI Tools dialog to add pixels to the ROIs. You do not have to use both pre-loaded ROIs. For instance, if no dark water is visible, you may be leave this ROI empty. You can create new ROIs as needed through the ROI Tool dialog and populate them with pixels that represent some other class of water. You need enough ROIs to accurately represent the different types of water that occur within the scene. Different types of water would be those that are spectrally different from each other. Each ROI should have at least a few points to represent variability within that type of water.
   </li>
   <li value="5">
    Click
    <b>
     Next
    </b>
    . The ROI Selection dialog appears.
   </li>
   <li value="6">
    Select one or more ROIs to map, then click
    <b>
     OK
    </b>
    . The Spectral Processing panel appears.
   </li>
   <li value="7">
    Select one or more
    <b>
     Spectral Processing Parameters
    </b>
    :
   </li>
   <ul>
    <li value="1">
     <b>
      Spectral Processing (
      <a href="../MatchedFiltering.htm">
       MF
      </a>
      ,
      <a href="../../FindFeatures/Classification/ClassificationTools/SpectralAngleMapper.htm">
       SAM
      </a>
      , and MF/SAM Ratio):
     </b>
     The
     <b>
      MF/SAM Ratio
     </b>
     method suppresses false positives that may be present in one, but not the other, while enhancing true positives. For example, a pixel containing water has a high MF value and low SAM value. A high value divided by a low value results in a very large value, therefore enhancing the positive result. Conversely, if the MF product has a high value for a false positive, but the SAM correctly maps it as non-water so it has a high value, the high value divided by high value results in a smaller value, suppressing the false positive.
    </li>
    <li value="2">
     <b>
      Principal Components Analysis (PCA)
     </b>
    </li>
    <li value="3">
     <a name="NDWI">
     </a>
     <b>
      Normalized Difference Water Index (NDWI):
     </b>
     NDWI works in the same manner as the common NDVI transform used to map vegetation. NDWI produces a single grayscale image, where water is bright. Some other features may also appear bright in the NDWI result, such as certain buildings and clouds. NDWI has proven to be effective in quickly highlighting water that is both non-obscured and obscured. Examine the NDWI results first, as they are typically more accurate and easier to interpret than the PCA results.
    </li>
   </ul>
   <li value="8">
    Click
    <b>
     Next
    </b>
    . The Digitize LOCs panel appears. See
    <a href="#Step10">
     Step 10
    </a>
    above for details on manually digitizing LOCs.
   </li>
  </ol>
  <h2>
   <a name="unsupervised">
   </a>
   Unsupervised (PCA, NDWI)
  </h2>
  <ol>
   <li value="1">
    When you select
    <b>
     Unsupervised (PCA, NDWI)
    </b>
    , then click
    <b>
     Next
    </b>
    in the Method Selection panel, the Spectral Processing panel appears.
   </li>
   <li value="2">
    Select one or more
    <b>
     Spectral Processing Parameters
    </b>
    :
   </li>
   <ul>
    <li value="1">
     <b>
      Principal Components Analysis (PCA)
     </b>
    </li>
    <li value="2">
     <p>
      <b>
       Normalized Difference Water Index (NDWI)
      </b>
      : NDWI works in the same manner as the common NDVI transform used to map vegetation. NDWI produces a single grayscale image, where water is bright. Some other features may also appear bright in the NDWI result, such as certain buildings and clouds. NDWI has proven to be effective in quickly highlighting water that is both non-obscured and obscured. Examine the NDWI results first, as they are typically more accurate and easier to interpret than the PCA results.
     </p>
    </li>
   </ul>
   <li value="3">
    Click
    <b>
     Next
    </b>
    . The Digitize LOCs panel appears. See
    <a href="#Step10">
     Step 10
    </a>
    above for details on manually digitizing LOCs.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>