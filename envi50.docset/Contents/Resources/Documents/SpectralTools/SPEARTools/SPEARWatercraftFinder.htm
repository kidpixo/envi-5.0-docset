<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools|SPEAR Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   SPEAR Watercraft Finder
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#SpectralTools/SPEARTools/SPEARWatercraftFinder.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="SpearTools.htm">
    SPEAR Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    SPEAR Watercraft Finder
   </span>
  </div>
  <h1>
   SPEAR Watercraft Finder
  </h1>
  <p>
   <a name="kanchor382">
   </a>
   The Watercraft Finder tool streamlines processing to detect the presence of moving or non-moving watercraft in open water environments using high-resolution multispectral data. While the tool is also applicable for detecting watercraft in littoral zones, the false positive rate will be elevated.
  </p>
  <p>
   The premise of the tool is that watercraft, which reflect in the near infrared wavelengths, will appear as anomalous clusters of pixels in near infrared absorbing water. Several algorithms within the tool make use of this premise to aid you in rapidly detecting watercraft. The algorithms
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   uses depend upon which of the following two processing workflows you choose:
  </p>
  <ul>
   <li value="1">
    Use the texture-based processing workflow to work on all pixels in the scene simultaneously, using the fact that the desired watercraft will occur as isolated clusters of anomalous pixels in an otherwise uniform background (this is the expected “texture” of the results). This is typically the most appropriate workflow to use.
   </li>
   <li value="2">
    Use the two-dimensional scatterplot workflow to operate only on the area of the image currently visible in the Image window view to manually select pixels for occurrence of watercraft. This workflow is not efficient for exploitation of large areas; use it instead for analysis of small areas or exploratory analysis of larger areas.
   </li>
  </ul>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#running">
     Run the Watercraft Finder Wizard
    </a>
   </li>
   <li value="2">
    <a href="#texture_based_search">
     Texture Based Search
    </a>
   </li>
   <li value="3">
    <a href="#two_band_scatterplot">
     Two Band Scatterplot
    </a>
   </li>
  </ul>
  <h2>
   <a name="running">
   </a>
   Run the Watercraft Finder Wizard
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     SPEAR &gt; SPEAR Watercraft Finder
    </b>
    . The SPEAR Watercraft Finder Wizard displays the File Selection panel.
   </li>
   <li value="2">
    By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. To change the directory and/or root filename, click
    <b>
     Select Output Root Name
    </b>
    .
   </li>
   <li value="3">
    If you are processing only a portion of the scene, or if the scene contains areas of land or dense clouds, click
    <b>
     Create New AOI
    </b>
    . The ROI Tool dialog appears.
   </li>
   <li value="4">
    Use the ROI Tool to draw a polygon ROI containing the portion of the image to process. Create an ROI that contains only open water. Any land surfaces or dense clouds remaining inside the ROI could lead to false positives. Much like watercraft, the clouds and land surfaces are relatively reflective in the near infrared wavelengths.
   </li>
   <li value="5">
    Click
    <b>
     Select Area of Interest
    </b>
    to select the ROI containing the polygon you just created. The AOI Selection dialog appears.
   </li>
   <li value="6">
    Select the ROI to use, then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="7">
    In the File Selection panel, click
    <b>
     Next
    </b>
    . The Method Selection panel appears.
   </li>
   <li value="8">
    Select one of the following methods, then click
    <b>
     Next
    </b>
    :
   </li>
   <ul>
    <li value="1">
     <b>
      <a href="#texture_based_search">
       Texture Based Search
      </a>
     </b>
    </li>
    <li value="2">
     <a href="#two_band_scatterplot">
      <b>
       Two Band Scatterplot
      </b>
     </a>
    </li>
   </ul>
   <li value="9">
    <a name="Step9">
    </a>
    Your results may still contain false positives after filtering if the false positives are about the same size as watercraft, or if you did not perform filtering. Optionally, click
    <b>
     Display Eraser ROI
    </b>
    .
   </li>
   <li value="10">
    The result loads into a new display group, and the ROI Tool dialog appears with an Eraser ROI entry.
   </li>
   <li value="11">
    Select the Eraser ROI to make it active, then use standard ROI drawing methods
    <![CDATA[ ]]>
    to cover over any observed false positives.
   </li>
   <li value="12">
    Click
    <b>
     Next
    </b>
    . The Eraser ROI Selection dialog displays.
   </li>
   <li value="13">
    <p>
     Select the Eraser ROI to use, then click
     <b>
      OK
     </b>
     to remove the false positives from the results. The Export Vectors panel appears. Following shows drawing polygons to cover false positives to remove from the results (right) (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_eraserroi.gif" />
    </p>
    <p>
     The following shows designated false positives no longer present after applying eraser ROI (right) (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_eraserresults.gif" />
    </p>
   </li>
   <li value="14">
    Optionally, select vector layers to export to separate files from the
    <b>
     Vector Output
    </b>
    list. The vectors you digitized are stored in separate files in
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    vector file (.evf) format. These vectors remain in the projection and datum of the input image. Each exported vector will result in the following files being created:
   </li>
   <ul>
    <li value="1">
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     vector file (
     <code>
      .evf
     </code>
     ) in the native image projection
    </li>
    <li value="2">
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     vector file (
     <code>
      .evf
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="3">
     Shapefile (
     <code>
      .shp
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="4">
     Keyhole markup language file (
     <code>
      .kml
     </code>
     ) in Geographic/WGS84 projection for use in Google Earth
    </li>
   </ul>
   <li value="15">
    Click
    <b>
     Export Selected Layer(s)
    </b>
    . By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. Separate files are written for the Water LOC layer, plus any layers you created or imported.
   </li>
   <li value="16">
    <p>
     Optionally, enable the
     <b>
      Export result to ArcGIS Geodatabase
     </b>
     option to save vector results to a geodatabase. The following shows an input image with detected watercraft overlaid (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_vectorsscroll_290x310.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.0005px;margin-bottom: 6.000484px;width: 290;height: 310;" />
    </p>
    <p>
     The following shows a full resolution image with detected watercraft overlaid (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_vectorsimage_568x400.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 5.999783px;width: 568;height: 400;" />
    </p>
   </li>
   <li value="17">
    When you are finished examining results, click
    <b>
     Finish
    </b>
    in the Processing Complete panel to exit the Wizard.
   </li>
  </ol>
  <h2>
   <a name="texture_based_search">
   </a>
   Texture Based Search
  </h2>
  <ol>
   <li value="1">
    When you select
    <b>
     Texture Based Search
    </b>
    , then click
    <b>
     Next
    </b>
    in the Method Selection panel. The Processing Method panel appears.
   </li>
   <li value="2">
    Select one of the following:
   </li>
   <ul>
    <li value="1">
     <b>
      Perform PCA processing:
     </b>
     <![CDATA[ ]]>
     This method creates a new dataset in which the watercraft stand out from the water more than in the original dataset, therefore leading to fewer false positives. Performing PCA over very dark areas, such as open water, often enhances the noise, which may also lead to false positives.
    </li>
    <li value="2">
     <b>
      Skip PCA processing:
     </b>
     Because the contrast between watercraft and water is typically fairly high in the original image, the default is not to use PCA. Change this option if you find that the variance in the result within the image was not sufficient to accurately detect watercraft without numerous false positives.
    </li>
   </ul>
   <li value="3">
    Click
    <b>
     Next
    </b>
    . The Texture Processing panel appears. If you selected to perform PCA processing,
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    performs the processing.
   </li>
   <li value="4">
    Select the image band to use for texture processing.
   </li>
   <ul>
    <li value="1">
     If PCA processing was
     <i>
      not
     </i>
     performed, select the NIR band (frequently Band 4), as this band has the best contrast between watercraft and water.
    </li>
    <li value="2">
     If PCA was performed, select the PCA band that shows the best contrast between watercraft and water. This is typically PCA Band 2, but may depend on the content of the scene.
    </li>
   </ul>
   <li value="5">
    Select one of the following texture measure types:
   </li>
   <ul>
    <li value="1">
     <b>
      Data Range
     </b>
     (typically the best choice)
    </li>
    <li value="2">
     <b>
      Variance
     </b>
    </li>
   </ul>
   <li value="6">
    Click
    <b>
     Create and Display Texture Image
    </b>
    to create the texture image and to load it into a new display group. A histogram window also appears.
   </li>
   <li value="7">
    <p>
     Optionally, select a threshold to detect watercraft. The threshold should be set low enough to minimize false positives without omitting real watercraft. Click on the dotted bar in the histogram window or enter values in the fields at the top of the histogram window to explore different thresholding options. When you are satisfied with the threshold, click
     <b>
      Retrieve Value
     </b>
     in the Texture Processing panel to register the selected threshold. Use
     <b>
      <a href="AutoFlicker.htm">
       Auto-Flicker
      </a>
     </b>
     to examine your results. The next image shows thresholding set to eliminate noise, but watercraft remain (imagery courtesy of DigitalGlobe)
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_texturestretching_589x332.gif" style="margin-left: 20.73024px;margin-top: 5.99976px;margin-right: 20.72948px;margin-bottom: 6.120724px;width: 589;height: 332;" />
    </p>
    <p>
     The following shows land and cloud areas remaining in ROI, highlighted in texture image (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_texturefalsepositive_415x228.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 6.000469px;width: 415;height: 228;" />
    </p>
   </li>
   <li value="8">
    Click
    <b>
     Next
    </b>
    . The Filter Results panel appears.
   </li>
   <li value="9">
    <p>
     Your results may have false positives due to the presence of land, clouds, or some other reason. These false positives are often smaller or larger than typical watercraft. For instance, noise frequently occurs as single pixels or small clusters of pixels. Conversely, false positives such as land and clouds are often much larger than watercraft, occurring in clusters with thousands of pixels. Set the
     <b>
      Min blob size
     </b>
     and
     <b>
      Max blob size
     </b>
     to values corresponding to the smallest and largest cluster sizes you would expect for watercraft. Ensure that the value ranges are sufficient enough that watercraft are not accidentally filtered out. To skip filtering, disable the
     <b>
      Filter results
     </b>
     check box. The following image shows results before filtering (center), and after filtering (right); some false positives remain (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_filterresults_583x215.gif" style="margin-left: 20.56536px;margin-top: 5.99976px;margin-right: 20.56465px;margin-bottom: 4.74049px;width: 583;height: 215;" />
    </p>
   </li>
   <li value="10">
    Click
    <b>
     Next
    </b>
    . The Edit Results panel appears. Continue with
    <a href="#Step9">
     Step 9
    </a>
    of
    <a href="#running">
     Running the Watercraft Finder Wizard
    </a>
    .
   </li>
  </ol>
  <h2>
   <a name="two_band_scatterplot">
   </a>
   Two Band Scatterplot
  </h2>
  <ol>
   <li value="1">
    When you select
    <b>
     Two Band Scatterplot
    </b>
    , then click
    <b>
     Next
    </b>
    in the Method Selection panel, the 2-D Scatterplot panel appears.
   </li>
   <li value="2">
    Scatterplots plotting the near infrared band versus the red band are normally the most effective for detecting watercraft. This is the default selection. To change the bands to plot, click
    <b>
     Show Band Selection
    </b>
    and select the bands.
   </li>
   <li value="3">
    Click
    <b>
     Load Scatterplot
    </b>
    to load the image to a display group and to show the scatterplot. The water pixels dominating the image in the display group form a dense cloud of points in the lower left quadrant of the scatterplot. If any watercraft (or other near infrared reflecting objects) are present, data points extend upwards and to the right of the data cloud.
   </li>
   <li value="4">
    To select data points, click and drag a circle around them in the scatterplot. Right-click to close the circle and register the points. The circled points in the scatterplot and their corresponding pixels in the display group turn red.
   </li>
   <li value="5">
    Continue selecting points in the scatterplot until the entire watercraft is highlighted. To clear selected points, right-click in the scatterplot and select
    <b>
     Clear Class
    </b>
    . To register the highlighted points, right-click in the scatterplot and select
    <b>
     Export Class
    </b>
    . Otherwise, the selected points are lost when the image display is moved.
   </li>
   <li value="6">
    <p>
     Because scatterplots only work on the portion of the image currently displayed, you must repeat the above process for every part of the image where you desire watercraft detection.
    </p>
    <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
     <span class="autonumber">
      <span>
       <b>
        Note:
       </b>
      </span>
     </span>
     To simplify the process, enlarge the Image window as much as possible (while keeping the scatterplot window visible), and use the scroll bars on the Image window to increment one image width at a time. If the Image window does not have scroll bars, right-click in the display, and select
     <b>
      Toggle Display Scroll Bars
     </b>
     .
    </p>
    <p>
     The following is a scatterplot of water with no watercraft (left), scatterplot with watercraft (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_scatterexamples_465x458.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 6.000484px;margin-bottom: 6.000484px;width: 465;height: 458;" />
    </p>
   </li>
   <li value="7">
    <p>
     To select a watercraft, circle the extension of data points, right-click, and select
     <b>
      Export Class
     </b>
     . Repeat this process for each portion of the image as it is viewed at full resolution in the Image window.
    </p>
    <p>
     The next image shows selecting the entire extension in the scatterplot highlights the entire watercraft (right) (imagery courtesy of DigitalGlobe).
    </p>
    <p>
     <img src="../../Resources/Images/Spectral/watercraft_scattertail_552x365.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 5.999752px;margin-bottom: 5.999783px;width: 552;height: 365;" />
    </p>
   </li>
   <li value="8">
    When all the watercraft are selected, click
    <b>
     Next
    </b>
    . The ROI Selection dialog appears.
   </li>
   <li value="9">
    Select all the ROIs that were exported during the previous steps, then click
    <b>
     OK
    </b>
    . SPEAR combines the results into a single layer. The Edit Results panel appears. Continue with
    <a href="#Step9">
     Step 9
    </a>
    of
    <a href="#running">
     Running the Watercraft Finder Wizard
    </a>
    .
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>