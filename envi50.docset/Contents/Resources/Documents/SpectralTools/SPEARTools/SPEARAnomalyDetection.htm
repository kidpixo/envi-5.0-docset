<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools|SPEAR Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   SPEAR Anomaly Detection
  </title>
  <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../../ENVIHelp_CSH.htm#SpectralTools/SPEARTools/SPEARAnomalyDetection.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="../SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="SpearTools.htm">
    SPEAR Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    SPEAR Anomaly Detection
   </span>
  </div>
  <h1>
   SPEAR Anomaly Detection
  </h1>
  <p>
   Anomaly detection provides a way to search for anything that is spectrally different from the background (spectral anomalies).
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   uses the
   <a href="../../Detection/Anomaly_Detection/RXAnomalyDetection.htm">
    Reed-Xiaoli Detector (RXD) algorithm
   </a>
   to detect and extract targets that are spectrally distinct from the image background.
  </p>
  <p>
   The SPEAR Anomaly Detection Wizard steps you through the process of running the RXD algorithm on your image and provides the following:
  </p>
  <ul>
   <li value="1">
    Since vegetation is spectrally anomalous in regions like arid areas, the SPEAR Anomaly Detection Wizard includes an option to suppress vegetation anomalies.
   </li>
   <li value="2">
    The SPEAR Anomaly Detection Wizard provides the ability to set thresholds to minimize false positives.
   </li>
   <li value="3">
    The SPEAR Anomaly Detection Wizard provides a way to filter, review, and rate detected anomalies.
   </li>
   <li value="4">
    Once you are satisfied with the detected anomalies, you can export them (by rating) to vector shapefiles.
   </li>
  </ul>
  <p>
   To run the SPEAR Anomaly Detection Wizard:
  </p>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     SPEAR &gt; SPEAR Anomaly Detection
    </b>
    . The SPEAR Anomaly Detection Wizard displays the File Selection panel.
   </li>
   <li value="2">
    Click
    <b>
     Select Input File
    </b>
    , choose a file, then click
    <b>
     OK
    </b>
    . The input image should be a multispectral file in any format readable by ENVI.
   </li>
   <li value="3">
    To optionally process only a portion of the scene, click
    <b>
     Select Subset
    </b>
    . A small Select Spatial Subset dialog appears.
   </li>
   <li value="4">
    Click
    <b>
     Spatial Subset
    </b>
    . The standard Select Spatial Subset dialog appears.  When finished, click
    <b>
     OK
    </b>
    to return to the File Selection panel.
   </li>
   <li value="5">
    By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. To change the directory and/or root filename, click
    <b>
     Select Output Root Name
    </b>
    .
   </li>
   <li value="6">
    Click
    <b>
     Next
    </b>
    . The Select Parameters dialog appears.
   </li>
   <li value="7">
    Select an algorithm from the drop-down list provided. For detailed information on each of these algorithms, see
    <a href="../../Detection/Anomaly_Detection/RXAnomalyDetection.htm">
     RX Anomaly Detection
    </a>
    . The following options are available:
   </li>
   <ul>
    <li value="1">
     <b>
      RXD
     </b>
     : Standard RXD algorithm.
    </li>
    <li value="2">
     <b>
      UTD
     </b>
     : Uniform Target Detector. UTD and RXD work exactly the same, but instead of using a sample vector from the data (as with RXD), UTD uses the unit vector. UTD extracts background signatures as anomalies and provides a good estimate of the image background.
    </li>
    <li value="3">
     <b>
      RXD-UTD
     </b>
     : A hybrid of the RXD and UTD methods. Subtracting UTD from RXD suppresses the background and enhances the anomalies of interest. The best condition to use RXD-UTD is when the anomalies have an energy level that is comparable to, or less than, that of the background.
    </li>
   </ul>
   <li value="8">
    Using the
    <b>
     Mean Source
    </b>
    toggle button, specify whether the mean spectrum should be derived from the full dataset (
    <b>
     Global
    </b>
    ) or from a localized kernel around the pixel (
    <b>
     Local
    </b>
    ). If you choose
    <b>
     Local
    </b>
    , the
    <b>
     Local Kernel Size
    </b>
    field appears. Specify a kernel size, in pixels, that will be used to create a mean spectrum around a given pixel. The default value is 15.
   </li>
   <li value="9">
    Optionally, enable the
    <b>
     Suppress vegetation anomalies
    </b>
    check box to suppress vegetative anomalies in the RXD results. This option is best used when vegetation is a minor component of the image. It works by calculating a Normalized Difference Vegetation Index (NDVI) for the input image, then rescaling the RXD results inversely proportional to the NDVI.
   </li>
   <li value="10">
    <p>
     Click
     <b>
      Next
     </b>
     . A processing status dialog appears and
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     adds the resulting output to the Layer Manager. The Filter Results dialog appears.
    </p>
    <p>
     The original image in natural color and the RXD results in grayscale are opened in the display and are dynamically linked for comparison. Bright pixels in the output image represent targets that are spectrally distinct from the image background.
    </p>
   </li>
   <li value="11">
    Change the display of the reference image using the
    <b>
     Reference Display
    </b>
    drop-down list.
   </li>
   <li value="12">
    If you selected to suppress vegetation anomalies, use the
    <b>
     Anomaly Display
    </b>
    drop-down list to toggle between the RXD results and the vegetation-suppressed results.
   </li>
   <li value="13">
    Optionally, select a threshold to segment the image into anomalous and non-anomalous regions. The threshold should be set low enough to minimize false positives without omitting real anomalies. Click on the dotted bar in the histogram window or enter values in the fields at the top of the histogram window to explore different thresholding options. Use
    <b>
     <a href="AutoFlicker.htm">
      Auto-Flicker
     </a>
    </b>
    to examine your results. Once a suitable threshold has been determined, click
    <b>
     Retrieve Value
    </b>
    on the SPEAR Wizard to automatically populate the anomaly threshold value field.
   </li>
   <li value="14">
    Click
    <b>
     Next
    </b>
    . The Manage Anomalies dialog appears, along with the Available Vectors List.
   </li>
   <li value="15">
    Change the display of the reference image using the
    <b>
     Reference
    </b>
    drop-down list.
   </li>
   <li value="16">
    If you selected to suppress vegetation anomalies, use the
    <b>
     Anomaly
    </b>
    drop-down list to toggle between the RXD results and the vegetation suppressed results.
   </li>
   <li value="17">
    The
    <b>
     Review Anomalies
    </b>
    section provides tools to manage the detected anomalies. To manage anomalies in the list, click on the row number to select a row or use the
    <b>
     Ctrl
    </b>
    or
    <b>
     Shift
    </b>
    keys to select multiple rows. Selected anomalies will be highlighted and centered (as selected) in the display. By default, all anomalies are initially flagged as “Pending.” Optionally, flag anomalies as “Good,” “Bad,” or “Pending” using the buttons provided.
   </li>
   <li value="18">
    Filter the list of anomalies using the
    <b>
     Show Anomalies
    </b>
    and
    <b>
     Sort by
    </b>
    drop-down lists. Sorting options include:
   </li>
   <ul>
    <li value="1">
     <b>
      Default
     </b>
     : Anomalies are listed in the order in which they were detected. Normally, this is from top-to-bottom and left-to-right.
    </li>
    <li value="2">
     <b>
      Pixels
     </b>
     : Anomalies are listed in order of size with the largest anomalies at the top of the list.
    </li>
    <li value="3">
     <b>
      Strength
     </b>
     : Anomalies are listed by the strength of the anomaly, measured by taking the mean of the RXD score.
    </li>
   </ul>
   <li value="19">
    Click
    <b>
     Display and Filter Options
    </b>
    to change the color and/or fill of different anomaly types and to change the filter settings for the minimum or maximum anomaly size.
   </li>
   <li value="20">
    Click
    <b>
     Next
    </b>
    . The Export Vectors dialog appears.
   </li>
   <li value="21">
    You can optionally export the detected anomalies to vector files. If you do not want to export the anomalies, enable the
    <b>
     Do not export vectors
    </b>
    checkbox. By default, anomalies flagged as “Good” are exported. Select anomaly types by flag in the
    <b>
     Select Anomaly Type(s) to Export
    </b>
    drop-down list to export anomaly types to separate files. Each exported anomaly type will result in the following files being created:
   </li>
   <ul>
    <li value="1">
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     vector file (
     <code>
      .evf
     </code>
     ) in the native image projection
    </li>
    <li value="2">
     <span class="DocumentTitleProductName">
      ENVI
     </span>
     vector file (
     <code>
      .evf
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="3">
     Shapefile (
     <code>
      .shp
     </code>
     ) in Geographic/WGS84 projection
    </li>
    <li value="4">
     Keyhole markup language file (
     <code>
      .kml
     </code>
     ) in Geographic/WGS84 projection for use in Google Earth
    </li>
   </ul>
   <li value="22">
    To save the detected anomalies to a geodatabase, select the vector layer name in the Available Vectors List and select
    <b>
     File &gt; Export Layers to ArcGIS Geodatabase
    </b>
    from the Available Vectors List menu bar. The Select Output Geodatabase dialog appears.
   </li>
   <li value="23">
    By default, output files are saved to the same directory and use the same rootname as the input file, minus any extension. Output files are appended with a unique suffix. To change the directory and/or root filename, click
    <b>
     Select Vector Rootname
    </b>
    .
   </li>
   <li value="24">
    When you are finished exporting results, click
    <b>
     Next
    </b>
    in the Export Vectors panel, then click
    <b>
     Finish
    </b>
    to exit the Wizard.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>