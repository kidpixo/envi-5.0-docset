<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Pixel Purity Index
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../ENVIHelp_CSH.htm#SpectralTools/PixelPurityIndex.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Pixel Purity Index
   </span>
  </div>
  <h1>
   Pixel Purity Index
  </h1>
  <p>
   Use
   <b>
    <a name="kanchor400">
    </a>
    Pixel Purity Index
   </b>
   (PPI) to find the most spectrally pure (extreme) pixels in multispectral and hyperspectral images. These typically correspond to mixing endmembers. The PPI is computed by repeatedly projecting n-D scatter plots on a random unit vector.
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   records the extreme pixels in each projection (those pixels that fall onto the ends of the unit vector) and it notes the total number of times each pixel is marked as extreme. A Pixel Purity Image is created where each pixel value corresponds to the number of times that pixel was recorded as extreme.
  </p>
  <p>
   The PPI function can create a new output band or continue its iterations and add the results to an existing output band. The PPI is typically run on an
   <a href="../PreprocessImagery/Transforms/MinimumNoiseFractionTransform.htm">
    MNF transform
   </a>
   result, excluding the noise bands. The results of the PPI are usually used as input into the
   <a href="nDimensionalVisualizer.htm">
    n-D Visualizer
   </a>
   .
  </p>
  <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
   <span class="autonumber">
    <span>
     <b>
      Note:
     </b>
    </span>
   </span>
   See
   <a href="SpectralHourglassWizard.htm">
    Spectral Hourglass Wizard
   </a>
   for instructions on the
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   hourglass processing flow, including the PPI, to find and map image spectral endmembers from hyperspectral or multispectral data.
  </p>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#FAST">
     FAST Pixel Purity Index
    </a>
   </li>
   <li value="2">
    <a href="#Selectin">
     Selecting Input Files
    </a>
   </li>
   <li value="3">
    <a href="#Restarti">
     Restarting or Continuing PPI
    </a>
   </li>
   <li value="4">
    <a href="#Using">
     Using PPI Images for Endmember Selection
    </a>
   </li>
  </ul>
  <h2>
   <a name="FAST">
   </a>
   FAST Pixel Purity Index
  </h2>
  <p>
   You can choose a disk-based PPI method or a FAST PPI method. The FAST PPI method places the image data into memory and performs the computations in memory, which is much faster than the disk-based PPI method, but requires adequate memory. Use spatial and spectral subsetting or a more sparse array of the data (through subsampled resolution) to fit the image data into memory.
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   informs you of the amount of memory necessary to perform the FAST PPI and prompts you for continuation. When using FAST PPI, you also have the option to create a new output file or to add to an existing output band.
  </p>
  <h2>
   <a name="Selectin">
   </a>
   Selecting Input Files
  </h2>
  <p>
   Use
   <b>
    New Output Band
   </b>
   the first time you run the PPI.
   <span class="DocumentTitleProductName">
    ENVI
   </span>
   creates an output band containing the number of times each pixel was found to be extreme (pure). You can use this as input into the n-D Visualizer.
  </p>
  <ol>
   <li value="1">
    From the Toolbox, select one of the following options:
    <ul>
     <li value="1">
      <b>
       Spectral &gt; Pixel Purity Index &gt; Pixel Purity Index (PPI) New Output Band
      </b>
      <![CDATA[ ]]>
     </li>
     <li value="2">
      <b>
       Spectral &gt; Pixel Purity Index &gt; Pixel Purity Index (PPI) [FAST] New Output Band
      </b>
      .
     </li>
    </ul>
   </li>
   <li value="2">
    Select the input file and perform optional spatial and spectral subsetting, and/or masking, then click
    <b>
     OK
    </b>
    .
   </li>
   <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
    <span class="autonumber">
     <span>
      <b>
       Note:
      </b>
     </span>
    </span>
    You typically run the PPI on an MNF transform result and use spectral subsetting to exclude noise bands based on the eigenimages and eigenvalue plot.
   </p>
   <li value="3">
    Click
    <b>
     OK
    </b>
    . The Pixel Purity Index Parameters or FAST Pixel Purity Index Parameters dialog appears, depending on which menu item you selected in step&#160;1.
   </li>
  </ol>
  <h3>
   <a name="setting_number_iterations">
   </a>
   Setting the Number of Iterations
  </h3>
  <ol>
   <li value="1">
    Enter a
    <b>
     Number of Iterations
    </b>
    value. With more iterations,
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    does a better job of finding the extreme pixels. Balance the number of iterations against the time available, as each iteration can take some time depending on the CPU and system load. Typically, thousands of iterations are required for imaging hyperspectral data. The resulting image header file will list the number of iterations run
   </li>
   <li value="2">
    The
    <b>
     Iterations per Block
    </b>
    field, which appears only in the Pixel Purity Index Parameters dialog, indicates how many iterations
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    should perform at once, and it determines the resolution of the PPI plot. Specifying a block size means that data points are plotted every
    <i>
     n
    </i>
    <sup>
     th
    </sup>
    iteration instead of each iteration. The default value of 250 provides reasonable performance; you should not change this value.
   </li>
  </ol>
  <h3>
   <a name="setting_threshold_factor">
   </a>
   Setting the Threshold Factor
  </h3>
  <p>
   Enter a
   <b>
    Threshold Factor
   </b>
   value in data units for extreme pixel selection.
  </p>
  <p>
   For example, a value of 2 flags all pixels greater than two DN values from the extreme pixels (both high and low) as extreme. This threshold selects the pixels on the ends of the projected vector. The threshold should be approximately two to three times the noise level in the data. Landsat TM data, for example, typically have less than 1 DN of noise, so a threshold value of 2 or 3 works well. When using MNF data, which normalizes the noise, a DN is equivalent to one sigma, so a threshold value of 2 or 3 works well. Larger thresholds cause the PPI to find more extreme pixels, but they are less likely to be pure endmembers.
  </p>
  <h3>
   <a name="Subsampl">
   </a>
   Subsampling the Data
  </h3>
  <p>
   The
   <b>
    X Resize Factor
   </b>
   and
   <b>
    Y Resize Factor
   </b>
   fields are only available when you select the
   <b>
    [FAST] New Output Band
   </b>
   option. To subsample the data and help fit them into memory, enter
   <b>
    X Resize Factor
   </b>
   and
   <b>
    Y Resize Factor
   </b>
   values less than&#160;1. For example, a resize factor of 0.5 uses every other pixel. However, you should not subsample less than 0.25 (every fourth pixel) because extreme pixels may be discarded.
  </p>
  <h3>
   <a name="Starting">
   </a>
   Starting the Processing
  </h3>
  <ol>
   <li value="1">
    In the Pixel Purity Index Parameters dialog, select output to
    <b>
     File
    </b>
    or
    <b>
     Memory
    </b>
    .
   </li>
   <li value="2">
    Click
    <b>
     OK
    </b>
    . If you are using the FAST PPI, a dialog appears that indicates the amount of memory needed and prompts you to continue if that amount of memory is acceptable.
   </li>
   <p>
    A processing status dialog appears with the PPI plot. This plot shows the total number of extreme pixels satisfying the threshold criterion found by the PPI processing as a function of the number of iterations. It should asymptotically approach a flat line (zero slope) when all of the extreme pixels are found.
   </p>
  </ol>
  <h2>
   <a name="Restarti">
   </a>
   Restarting or Continuing PPI
  </h2>
  <p>
   Use
   <b>
    Existing Output Band
   </b>
   or
   <b>
    [FAST] Existing Output Band
   </b>
   if you clicked
   <b>
    Cancel
   </b>
   and PPI was interrupted during processing, or use either option if you want to continue additional iterations on a PPI result.
  </p>
  <ol>
   <li value="1">
    From the Toolbox, select one of the following options:
    <ul>
     <li value="1">
      <b>
       Spectral &gt; Pixel Purity Index &gt; Pixel Purity Index (PPI) Existing Output Band
      </b>
     </li>
     <li value="2">
      <b>
       Spectral &gt; Pixel Purity Index &gt; Pixel Purity Index (PPI) [FAST] Existing Output Band
      </b>
      .
     </li>
    </ul>
   </li>
   <li value="2">
    Select an input file (a spectrally subsetted MNF is recommended).
   </li>
   <li value="3">
    Click
    <b>
     OK
    </b>
    . The Pixel Purity Index Previous Result dialog appears.
   </li>
   <li value="4">
    Select a previous PPI image as the input file.
   </li>
   <li value="5">
    Click
    <b>
     OK
    </b>
    . The Pixel Purity Index Parameters dialog appears.
   </li>
   <li value="6">
    Enter the parameters as described in Setting the Number of Iterations and Setting the Threshold Factor.
   </li>
   <li value="7">
    Click
    <b>
     OK
    </b>
    . A processing status dialog and Pixel Purity Index Plot appear.
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    adds the resulting output to the Layer Manager.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>