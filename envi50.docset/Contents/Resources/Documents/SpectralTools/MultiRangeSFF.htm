<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools|Mapping Methods" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Multi Range Spectral Feature Fitting
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../ENVIHelp_CSH.htm#SpectralTools/MultiRangeSFF.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <a class="MCBreadcrumbsLink" href="SpectralMappingMethods.htm">
    Mapping Methods
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Multi Range Spectral Feature Fitting
   </span>
  </div>
  <h1>
   Multi Range Spectral Feature Fitting
  </h1>
  <p>
   Use
   <b>
    Multi Range SFF
   </b>
   to apply SFF using multiple wavelength ranges for each endmember. Spectral signatures are typically characterized by multiple absorption features. The Multi Range SFF function allows you to define multiple and different wavelength ranges around each endmemberâ€™s absorption features. This SFF method uses the multiple ranges in its comparisons. Each spectral range is interactively defined, and the continuum-removed absorption feature is plotted. You can apply optional weights to each spectral range to emphasize more important features. You can also save the defined wavelength ranges to a file and reuse them.
  </p>
  <p>
   Multi Range SFF executes more slowly than SFF but is likely to produce more accurate results. Like SFF, neither the input image nor the reference spectra need to be continuum-removed before using Multi Range SFF. However, you are not required to spectrally resample the reference spectra to match the wavelengths of the input image, or to scale the reference spectra into the same range as the input image before using Multi Range SFF. You can interpret the resulting images in the same manner as
   <a href="SpectralFeatureFitting.htm#results">
    SFF results
   </a>
   .
  </p>
  <p>
   See the following sections:
  </p>
  <ul>
   <li value="1">
    <a href="#Using">
     Use New Spectral Ranges in Multi Range SFF
    </a>
   </li>
   <li value="2">
    <a href="#Using2">
     Use Previously Defined Spectral Ranges in Multi Range SFF
    </a>
   </li>
   <li value="3">
    <a href="#Defining">
     Define New Spectral Ranges
    </a>
   </li>
   <li value="4">
    <a href="#edit_ranges">
     Edit Previously Defined Ranges
    </a>
   </li>
  </ul>
  <h2>
   <a name="Using">
   </a>
   Use New Spectral Ranges in Multi Range SFF
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Spectral &gt; Mapping Methods &gt; MultiRange Spectral Feature Fitting &gt; MultiRange SFF Use New Ranges
    </b>
    . The Select Multi Range SFF Input File dialog appears.
   </li>
   <li value="2">
    Select the input file and perform optional spatial and spectral
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , and/or masking, then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="3">
    Click
    <b>
     OK
    </b>
    . The Select Input Spectral Library dialog appears.
   </li>
   <li value="4">
    Open or select the spectral library.
   </li>
   <li value="5">
    Click
    <b>
     OK
    </b>
    . The Input Spectral Library dialog appears.
   </li>
   <li value="6">
    Select the endmember spectra from the list.
   </li>
   <li value="7">
    Click
    <b>
     OK
    </b>
    . The Edit Multi Range SFF Endmember Ranges dialog appears with a list of the selected endmembers.
   </li>
   <li value="8">
    Select an endmember name on the left. The spectrum plot appears on the right.
   </li>
   <li value="9">
    Choose which spectral ranges to use in the SFF by left-clicking in the plot. A marker appears. Left-click and drag to position the marker on the starting wavelength. Right-click and select
    <b>
     Set as Start Range
    </b>
    . The wavelength value appears in the
    <b>
     Start Range
    </b>
    field. Left-click and move the marker to the ending range wavelength position. Right-click and select
    <b>
     Set as End Range
    </b>
    . The wavelength value appears in the
    <b>
     End Range
    </b>
    field.
   </li>
   <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
    <span class="autonumber">
     <span>
      <b>
       Note:
      </b>
     </span>
    </span>
    Middle-click and drag to zoom in to the spectral plot. Use the right-click menu to reset the zoom range.
   </p>
   <p>
    You can also enter
    <b>
     Start Range
    </b>
    and
    <b>
     End Range
    </b>
    values directly. You can adjust the position of the markers one wavelength increment at a time by clicking the increase/decrease buttons next to the
    <b>
     Start Range
    </b>
    and
    <b>
     End Range
    </b>
    fields. Pressing
    <b>
     Enter
    </b>
    after entering a wavelength value causes that value to jump to the nearest library spectrum wavelength value.
   </p>
   <li value="10">
    Click
    <b>
     Add Range
    </b>
    , or right-click in the plot window and select
    <b>
     Add Range
    </b>
    . The range is added to the Edit Multi Range SFF Endmember Ranges dialog, and the continuum-removed selected feature is plotted. The number next to the feature is its depth measure. This is a ratio of feature depth divided by continuum level; lower values indicate a larger feature depth.
    <ul>
     <li value="1">
      To remove a spectral range, click
      <b>
       Remove
      </b>
      <b style="font-weight: normal;">
       in the
      </b>
      Edit Multi Range SFF Endmember Ranges dialog.
     </li>
     <li value="2">
      To remove the colored continuum graphic from the plot, select the
      <b>
       Cont
      </b>
      check box in the Edit Multi Range SFF Endmember Ranges dialog.
     </li>
     <li value="3">
      To remove the continuum-removed feature graphic from the plot, select the
      <b>
       CR
      </b>
      check box in the Edit Multi Range SFF Endmember Ranges dialog.
     </li>
     <li value="4">
      To weight one feature more than another for that endmember, enter the weight factors. The weight factors are calculated by summing the total entered weights and dividing each weight by that sum.
     </li>
    </ul>
   </li>
   <li value="11">
    Select other spectral ranges, if desired, for that endmember by repeating steps 6-7.
   </li>
   <li value="12">
    Select the next endmember and select its spectral ranges.
   </li>
   <li value="13">
    Save the ranges to a file by selecting
    <b>
     Save Ranges
    </b>
    in the Edit Multi Range SFF Endmember Ranges dialog and entering an output filename.
   </li>
   <li value="14">
    Click
    <b>
     OK
    </b>
    . The Multi Range SFF Parameters dialog appears.
   </li>
   <li value="15">
    Select whether to output separate or combined scale and RMS images using the toggle button (see
    <a href="SpectralFeatureFitting.htm#results">
     Spectral Feature Fitting Results
    </a>
    , which describes these outputs).
   </li>
   <li value="16">
    Enter an output filename.
   </li>
   <li value="17">
    Click
    <b>
     OK
    </b>
    .
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    adds the resulting output to the Layer Manager.
   </li>
  </ol>
  <h2>
   <a name="Using2">
   </a>
   Use Previously Defined Spectral Ranges in Multi Range SFF
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Spectral &gt; Mapping Methods &gt; MultiRange Spectral Feature Fitting &gt; MultiRange SFF Use Previous Ranges
    </b>
    . The Select Multi Range SFF Input File dialog appears.
   </li>
   <li value="2">
    Select the input file and perform optional spatial and spectral
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , and/or masking, then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="3">
    Click
    <b>
     OK
    </b>
    . The Enter Multi Range SFF Parameters Filename dialog appears.
   </li>
   <li value="4">
    Select the file containing the previously defined spectral ranges. The Select Endmembers dialog appears.
   </li>
   <li value="5">
    Select the desired endmembers to use.
   </li>
   <li value="6">
    Click
    <b>
     OK
    </b>
    . The Edit Multi Range SFF Endmember Ranges dialog appears.
   </li>
   <li value="7">
    <a href="#edit_ranges">
     Edit the ranges
    </a>
    as desired.
   </li>
   <li value="8">
    Click
    <b>
     OK
    </b>
    . The Multi Range SFF Parameters dialog appears.
   </li>
   <li value="9">
    Select whether to output separate or combined scale and RMS images using the toggle button (see
    <a href="SpectralFeatureFitting.htm#results">
     Spectral Feature Fitting Results
    </a>
    , which describes these outputs).
   </li>
   <li value="10">
    Enter an output filename.
   </li>
   <li value="11">
    Click
    <b>
     OK
    </b>
    .
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    adds the resulting output to the Layer Manager.
   </li>
  </ol>
  <h2>
   <a name="Defining">
   </a>
   Define New Spectral Ranges
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Spectral &gt; Mapping Methods &gt; MultiRange Spectral Feature Fitting &gt; MultiRange SFF Define New Ranges
    </b>
    . The Select Input Spectral Library dialog appears.
   </li>
   <li value="2">
    Select an input spectral library file.
   </li>
   <li value="3">
    Click
    <b>
     OK
    </b>
    . The Input Spectral Library dialog appears.
   </li>
   <li value="4">
    Select one or more endmember spectra.
   </li>
   <li value="5">
    Click
    <b>
     OK
    </b>
    . The Edit Multi Range SFF Endmember Ranges dialog appears with a list of the selected endmembers.
   </li>
   <li value="6">
    The first endmember is selected by default on the left, and its spectrum is plotted on the right. Select another endmember name to update the plot. Only one spectrum is plotted at a time.
   </li>
   <li value="7">
    Choose which spectral ranges to use in the SFF using methods described above.
   </li>
   <li value="8">
    Click
    <b>
     OK
    </b>
    . The Save Changes to Multi Range SFF Record dialog appears.
   </li>
   <li value="9">
    Enter an output filename with a
    <code>
     .sff
    </code>
    extension.
   </li>
   <li value="10">
    Click
    <b>
     OK
    </b>
    .
   </li>
  </ol>
  <h2>
   <a name="edit_ranges">
   </a>
   Edit Previously Defined Ranges
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Spectral &gt; Mapping Methods &gt; MultiRange Spectral Feature Fitting &gt; MultiRange SFF Edit Previous Ranges
    </b>
    . The Enter Multi Range SFF Parameters Filename dialog appears.
   </li>
   <li value="2">
    Select a
    <code>
     .sff
    </code>
    file.
   </li>
   <p>
    The Edit Multi Range SFF Endmember Ranges dialog appears with a list of the selected endmembers and their corresponding spectral ranges.
   </p>
   <li value="3">
    Edit the spectral ranges using methods described above. Click
    <b>
     OK
    </b>
    . The Save Changes to Multi Range SFF Record dialog appears.
   </li>
   <li value="4">
    Click
    <b>
     OK
    </b>
    to update the
    <code>
     .sff
    </code>
    file.
   </li>
  </ol>
  <div class="mp_footer">
   Copyright Â©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>