<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" madcap:lastblockdepth="2" madcap:lastheight="135.6667" madcap:lastwidth="592" madcap:disablemasterstylesheet="true" madcap:tocpath="Spectral Tools" madcap:medium="non-print" madcap:inpreviewmode="false" madcap:preloadimages="false" madcap:runtimefiletype="Topic" madcap:targettype="WebHelp" lang="en-us" xml:lang="en-us" madcap:pathtohelpsystem="../../" madcap:helpsystemfilename="ENVIHelp.xml" madcap:searchtype="Stem">
 <!-- saved from url=(0014)about:internet -->
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
   Spectral Math
  </title>
  <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
  <link href="../Resources/TableStyles/Description.css" rel="stylesheet" />
  <link href="../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
  <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
  </script>
 </head>
 <body>
  <p class="MCWebHelpFramesetLink" style="display: none;">
   <a href="../../ENVIHelp_CSH.htm#SpectralTools/SpectralMath.htm" style="">
    Open topic with navigation
   </a>
  </p>
  <div class="MCBreadcrumbsBox_0">
   <span class="MCBreadcrumbsPrefix">
    <![CDATA[ ]]>
   </span>
   <a class="MCBreadcrumbsLink" href="SpectralTools.htm">
    Spectral Tools
   </a>
   <span class="MCBreadcrumbsDivider">
    &gt;
   </span>
   <span class="MCBreadcrumbs">
    Spectral Math
   </span>
  </div>
  <h1>
   Spectral Math
   <a name="kanchor404">
   </a>
  </h1>
  <p>
   Use
   <b>
    Spectral Math
   </b>
   to apply mathematical expressions or IDL procedures to spectra and to selected multi-band images. The spectra can be either from a multi-band image (using a Z Profile), a spectral library, or an ASCII&#160;file. You can apply mathematical expressions to all of the bands of multi-band images as long as the number of bands and spectral channels match.
  </p>
  <p>
   To apply Spectral Math, each spectrum you want to process must be open and displayed in a plot window.
  </p>
  <p>
   The following figure depicts Spectral Math processing that adds three spectra. Each spectrum in the expression is mapped to an input spectrum and summed, and the resulting spectrum is output to a plot window. You can map one or more of the expression spectra to a file instead of mapping each input to a single spectrum. The resulting output is a new image file. For example, in the expression s1 + s2 + s3, if s1 is mapped to a file and s2 and s3 are mapped to single spectra, then the resulting image file contains the spectra of the s1 file summed with s2 and s3.
  </p>
  <p>
   See the following sections for more information:
  </p>
  <ul>
   <li value="1">
    <a href="#Entering">
     Enter Mathematical Expressions
    </a>
   </li>
   <li value="2">
    <a href="#Assignin">
     Assign Spectra to Variables
    </a>
   </li>
  </ul>
  <h2>
   <a name="Entering">
   </a>
   Enter Mathematical Expressions
  </h2>
  <ol>
   <li value="1">
    From the Toolbox, select
    <b>
     Spectral &gt; Spectral Math
    </b>
    . The Spectral Math dialog appears.
   </li>
   <li value="2">
    In the Spectral Math dialog, enter the desired mathematical expression, including variable names, into the
    <b>
     Enter an expression
    </b>
    field. The dialog accepts any valid IDL mathematical expression, function, or procedure as long as the result can be expressed as a vector (a 1D array) if you are processing spectra, or a 2D array if you are processing images. The expression is assigned to the entire spectrum or image.
   </li>
   <p>
    Variable names must begin with the character “s” or “S” followed by up to five numeric characters. For example, to calculate the average of six spectra, you can enter:
   </p>
   <pre>
    <code>
     (s1+s2+s3+s4+s5+s6)/6
    </code>
   </pre>
   <p>
    Where
    <code>
     s1
    </code>
    is one spectrum,
    <code>
     s2
    </code>
    is a second spectrum, and so forth.
   </p>
   <p>
    <a name="table">
    </a>
    The following table lists the functions and operators (shown in parentheses) used in Spectral Math.
   </p>
   <table style="caption-side: bottom;margin-left: 0;margin-right: auto;mc-table-style: url('../Resources/TableStyles/Description.css');" cellspacing="0" class="TableStyle_Description">
    <col />
    <col />
    <col />
    <thead>
     <tr>
      <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
       <p>
        Series and Scalar Math
       </p>
      </td>
      <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
       <p>
        Trigonometric Functions
       </p>
      </td>
      <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
       <p>
        Other Spectral Math Options
       </p>
      </td>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Addition (+)
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Sine (sin(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
       <p>
        Relational Operators (EQ, NE, LE, LT, GE, GT)
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Subtraction (-)
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Cosine (cos(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
       <p>
        Boolean Operators (AND, OR, XOR, NOT)
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Multiplication (*)
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Tangent (tan(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
       <p>
        Type conversion functions (byte, fix, long, float, double, complex)
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Division (/)
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        ArcSine (asin(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
       <p>
        IDL functions that return array results
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Minimum operator (&lt;)
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        ArcCosine (acos(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
       <p>
        IDL procedures that return array results
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Maximum operator (&gt;)
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        ArcTangent (atan(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
       <p>
        &#160;
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Absolute Value (abs(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Hyperbolic Sine (sinh(x))
       </p>
      </td>
      <td rowspan="5" class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
       <p>
        &#160;
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Square Root (sqrt(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Hyperbolic Cosine (cosh(x))
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Exponent (^)
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
       <p>
        Hyperbolic Tangent (tanh(x))
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        Natural Exponent (exp(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
       <p>
        &#160;
       </p>
      </td>
     </tr>
     <tr>
      <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
       <p>
        Natural Logarithm (alog(x))
       </p>
      </td>
      <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
       <p>
        &#160;
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p>
    The Spectral Math dialog also contains the following functionality:
   </p>
   <ul>
    <li value="1">
     <b>
      Previous Spectral Math Expressions
     </b>
     : This list shows previously applied mathematical expressions. To apply an expression to a new set of spectra, select it from the list and enter it into the
     <b>
      Enter an expression
     </b>
     field. Click
     <b>
      OK
     </b>
     .
    </li>
    <li value="2">
     <b>
      Save
     </b>
     : Save mathematical expressions to a file. The Save Expressions to a File dialog appears. Enter an output filename with an
     <code>
      .exp
     </code>
     extension. Click
     <b>
      OK
     </b>
     . You can save expressions to a file without having to first run them through the Spectral Math function.
    </li>
    <li value="3">
     <b>
      Restore
     </b>
     : Restore previously saved mathematical expressions. The Enter Expressions Filename dialog appears. Select a filename and click
     <b>
      OK
     </b>
     .
    </li>
    <li value="4">
     <b>
      Clear
     </b>
     :
     <b>
      <![CDATA[ ]]>
     </b>
     Clear all expressions from the
     <b>
      Previous Spectral Math Expressions
     </b>
     list.
    </li>
    <li value="5">
     <b>
      Delete
     </b>
     : Delete a single expression from the
     <b>
      Previous Spectral Math Expressions
     </b>
     list
     <b style="font-weight: normal;">
      .
     </b>
    </li>
    <li value="6">
     <b>
      Add to List
     </b>
     : To add an individual expression to the
     <b>
      Previous Spectral Math Expressions
     </b>
     list, enter it in the
     <b>
      Enter an expression
     </b>
     field and click
     <b>
      Add to List
     </b>
     .
    </li>
   </ul>
   <li value="3">
    After entering a mathematical expression in the
    <b>
     Enter an expression
    </b>
    field, click
    <b>
     OK
    </b>
    . The Variable to Spectra Pairings dialog appears.
   </li>
  </ol>
  <h2>
   <a name="Assignin">
   </a>
   Assign Spectra to Variables
  </h2>
  <p>
   Use the Variable to Spectra Pairings dialog to assign previously displayed input spectra to variable names you entered in the
   <b>
    Enter an expression
   </b>
   field in the Spectral Math dialog.
  </p>
  <p>
   Using the example mathematical expression
   <code>
    (s1+s2+s3+s4+s5+s6)/6
   </code>
   , follow these steps:
  </p>
  <ol>
   <li value="1">
    In the
    <b>
     Variables used in expression
    </b>
    field, select the variable
    <b>
     S1 - [undefined]
    </b>
    .
   </li>
   <li value="2">
    In the
    <b>
     Available Spectra List
    </b>
    , select a spectrum. The spectrum is paired with the selected variable.
   </li>
   <li value="3">
    Assign spectra to the other variables using the same steps. To clear the pairings, click
    <b>
     Clear
    </b>
    .
   </li>
   <li value="4">
    After all variables are paired with spectra, choose an output result.
    <ul>
     <li value="1">
      To plot the results in the same plot window as the input spectra, toggle
      <b>
       Output Result to
      </b>
      to select
      <b>
       Same Window
      </b>
      .
     </li>
     <li value="2">
      To plot the results into a new plot window, toggle
      <b>
       Output Result to
      </b>
      to select
      <b>
       New Window
      </b>
      .
     </li>
    </ul>
   </li>
   <p>
    If you use spectra from two plot windows and you select output to the
    <b>
     Same Window
    </b>
    ,
    <span class="DocumentTitleProductName">
     ENVI
    </span>
    plots the result in the same window as the first assigned spectrum.
   </p>
   <li value="5">
    Click
    <b>
     OK
    </b>
    . When the processing is complete, the Spectral Math result spectrum is plotted in the chosen plot window. The plot is available for additional processing or saving to an output file using plot functions.
   </li>
  </ol>
  <h3>
   Map Variables to Input Files
  </h3>
  <p>
   If an image file or image memory item is available, a
   <b>
    Map Variable to Input File
   </b>
   button appears in the Variables to Spectra Pairings dialog.
  </p>
  <ol>
   <li value="1">
    To select a single-band or multi-band image for use in Spectral Math, select a variable name and click
    <b>
     Map Variable to Input File
    </b>
    .
   </li>
   <li value="2">
    Select the input file and perform optional spatial and spectral
    <a href="../NoTOCTopics/Subsetting.htm">
     subsetting
    </a>
    , and/or masking, then click
    <b>
     OK
    </b>
    .
   </li>
   <li value="3">
    Select output to
    <b>
     File
    </b>
    or
    <b>
     Memory
    </b>
    .
   </li>
   <li value="4">
    Click
    <b>
     OK
    </b>
    . When you use an input image in Spectral Math, the output image has the same spatial and spectral dimensions.
   </li>
   <p class="Note" madcap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
    <span class="autonumber">
     <span>
      <b>
       Note:
      </b>
     </span>
    </span>
    You can also use
    <b>
     Map Variable to Input File
    </b>
    to perform mathematical operations simultaneously on all bands of an image.
   </p>
  </ol>
  <div class="mp_footer">
   Copyright ©
   <span class="DocumentTitleCopyrightYear">
    2012
   </span>
   <![CDATA[ ]]>
   <span class="DocumentTitleCopyrightCompanyName">
    Exelis Visual Information Solutions, Inc.
   </span>
   All Rights Reserved.
  </div>
  <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
  </script>
 </body>
</html>